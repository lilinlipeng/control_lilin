{"version":3,"file":"footer-bar.js","sources":["components/footer-bar/footer-bar.vue","../../HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/Rjovd29ya3NwYWNlL0hlYWx0aENvbnRyb2wudW5pYXBwL2NvbXBvbmVudHMvZm9vdGVyLWJhci9mb290ZXItYmFyLnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"footer-bar\" :style=\"{ height: `${tabbarHeight}px`, paddingBottom: `${safeAreaBottom}px` }\">\n\n\t\t<template v-for=\"(item, index) in footerBarList\" :key=\"index\">\n\t\t\t<view class=\"footer-item\" :class=\"{ 'footer-item-active': currentIndex === index }\" @click=\"skip(item.url)\">\n\t\t\t\t<view class=\"footer-icon-wrapper\">\n\t\t\t\t\t<image :src=\"item.icon\" class=\"footer-icon\"\n\t\t\t\t\t\t:class=\"{ 'footer-icon-active': currentIndex === index }\">\n\t\t\t\t\t</image>\n\n\t\t\t\t</view>\n\t\t\t\t<text class=\"footer-label\" :class=\"{ 'footer-label-active': currentIndex === index }\">{{ item.label\n\t\t\t\t}}</text>\n\t\t\t</view>\n\t\t</template>\n\t</view>\n</template>\n\n<script>\nimport { useCommonStore } from '@/store';\nimport { computed, onMounted, ref } from 'vue';\n\nexport default {\n\tname: 'fb',\n\toptions: {\n\t\t// 在微信小程序中将组件节点渲染为虚拟节点\n\t\tvirtualHost: true,\n\t\t// 使其成为纯数据组件\n\t\tpureDataPattern: /^_/\n\t},\n\tsetup() {\n\t\t// 获取store\n\t\tconst store = useCommonStore();\n\n\t\t// 定义响应式数据\n\t\tconst currentIndex = ref(0)\n\t\tconst tabbarHeight = ref(50) // 默认底部导航栏高度\n\t\tconst safeAreaBottom = ref(0) // 安全区域底部高度\n\n\t\t// 从store获取数据\n\t\tconst footerBarList = computed(() => store.FooterBarList)\n\n\t\t// 生命周期钩子\n\t\tonMounted(() => {\n\n\t\t\tlet pages = getCurrentPages()\n\t\t\tlet currentPageRoute = pages[pages.length - 1].route\n\t\t\tlet mapFooterBarList = footerBarList.value.map(x => x.url.replace('/', ''))\n\t\t\tlet position = mapFooterBarList.indexOf(currentPageRoute)\n\t\t\tcurrentIndex.value = position\n\n\t\t\t// 获取系统信息\n\t\t\tgetSystemInfo()\n\t\t})\n\t\n\t\t// 获取系统信息并设置底部安全区域\n\t\t\t\tconst getSystemInfo = () => {\n\n\t uni.getSystemInfo({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t// 基础底部导航栏高度\n\t\t\t\t\tconst baseHeight = 50\n\n\t\t\t\t\t// 判断是否为iOS设备\n\t\t\t\t\tconst isIOS = res.platform === 'ios'\n\n\t\t\t\t\t// 获取安全区域\n\t\t\t\t\tif (res.safeArea) {\n\t\t\t\t\t\t// 计算底部安全区域高度\n\t\t\t\t\t\tsafeAreaBottom.value = res.screenHeight - res.safeArea.bottom\n\t\t\t\t\t}\n\n\t\t\t\t\t// 设置底部导航栏高度（基础高度）\n\t\t\t\t\ttabbarHeight.value = baseHeight\n\n\t\t\t\t\t// 如果是iPhone并且有底部安全区域（刘海屏）\n\t\t\t\t\tif (isIOS && safeAreaBottom.value > 0) {\n\t\t\t\t\t\t// 不需要额外增加tabbarHeight，因为我们使用paddingBottom来适配安全区域\n\t\t\t\t\t} else if (!isIOS) {\n\t\t\t\t\t\t// 安卓设备可能需要轻微调整\n\t\t\t\t\t\tsafeAreaBottom.value = Math.max(safeAreaBottom.value, 8)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t}\n\n\t\t// 方法\n\t\tconst skip = (url) => {\n\t\tuni.redirectTo({\n\t\t\turl: url\n\t\t})\n\t}\n\n\t\treturn {\n\t\tcurrentIndex,\n\t\ttabbarHeight,\n\t\tsafeAreaBottom,\n\t\tfooterBarList,\n\t\tskip\n\t}\n}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n/* 底部导航栏容器 */\n.footer-bar {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tjustify-content: space-around;\n\tbackground-color: var(--bg-color);\n\tbox-shadow: var(--box-shadow-sm);\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tz-index: 999;\n\tborder-top: 1upx solid var(--border-color-lighter);\n\tbox-sizing: content-box;\n\t/* 确保padding不影响总高度计算 */\n}\n\n/* 底部导航项 */\n.footer-item {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tflex: 1;\n\theight: 100%;\n\ttransition: var(--transition-base);\n\tposition: relative;\n\tpadding: var(--spacing-xs) 0;\n\n\t/* 点击效果 */\n\t&:active {\n\t\topacity: var(--opacity-medium);\n\t\ttransform: scale(0.98);\n\t}\n\n\t/* 图标包装器 */\n\t.footer-icon-wrapper {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmargin-bottom: var(--spacing-xs);\n\n\t\t/* 图标样式 */\n\t\t.footer-icon {\n\t\t\twidth: var(--img-size-sm);\n\t\t\theight: var(--img-size-sm);\n\t\t\ttransition: var(--transition-base);\n\t\t\topacity: 0.8;\n\t\t}\n\n\t\t/* 激活状态的图标 */\n\t\t.footer-icon-active {\n\t\t\topacity: 1;\n\t\t\ttransform: scale(1.1);\n\t\t}\n\n\n\t}\n\n\t/* 标签文字 */\n\t.footer-label {\n\t\tfont-size: var(--font-size-sm);\n\t\tcolor: var(--text-color-light);\n\t\ttransition: var(--transition-base);\n\t\tline-height: 1.2;\n\t}\n\n\t/* 激活状态的标签 */\n\t.footer-label-active {\n\t\tcolor: var(--primary-color);\n\t\tfont-weight: 500;\n\t\tfont-size: var(--font-size-base);\n\t}\n}\n\n/* 动画效果 */\n@keyframes fadeIn {\n\tfrom {\n\t\topacity: 0;\n\t\ttransform: scale(0);\n\t}\n\n\tto {\n\t\topacity: 1;\n\t\ttransform: scale(1);\n\t}\n}\n</style>","import Component from 'F:/workspace/HealthControl.uniapp/components/footer-bar/footer-bar.vue'\nwx.createComponent(Component)"],"names":["useCommonStore","ref","computed","onMounted","uni"],"mappings":";;;AAsBA,MAAK,YAAU;AAAA,EACd,MAAM;AAAA,EACN,SAAS;AAAA;AAAA,IAER,aAAa;AAAA;AAAA,IAEb,iBAAiB;AAAA,EACjB;AAAA,EACD,QAAQ;AAEP,UAAM,QAAQA,YAAAA;AAGd,UAAM,eAAeC,cAAG,IAAC,CAAC;AAC1B,UAAM,eAAeA,cAAG,IAAC,EAAE;AAC3B,UAAM,iBAAiBA,cAAG,IAAC,CAAC;AAG5B,UAAM,gBAAgBC,cAAAA,SAAS,MAAM,MAAM,aAAa;AAGxDC,kBAAAA,UAAU,MAAM;AAEf,UAAI,QAAQ,gBAAgB;AAC5B,UAAI,mBAAmB,MAAM,MAAM,SAAS,CAAC,EAAE;AAC/C,UAAI,mBAAmB,cAAc,MAAM,IAAI,OAAK,EAAE,IAAI,QAAQ,KAAK,EAAE,CAAC;AAC1E,UAAI,WAAW,iBAAiB,QAAQ,gBAAgB;AACxD,mBAAa,QAAQ;AAGrB,oBAAc;AAAA,KACd;AAGC,UAAM,gBAAgB,MAAM;AAE9BC,oBAAAA,MAAI,cAAc;AAAA,QAChB,SAAS,CAAC,QAAQ;AAEjB,gBAAM,aAAa;AAGnB,gBAAM,QAAQ,IAAI,aAAa;AAG/B,cAAI,IAAI,UAAU;AAEjB,2BAAe,QAAQ,IAAI,eAAe,IAAI,SAAS;AAAA,UACxD;AAGA,uBAAa,QAAQ;AAGrB,cAAI,SAAS,eAAe,QAAQ;AAAG;AAAA,mBAE5B,CAAC,OAAO;AAElB,2BAAe,QAAQ,KAAK,IAAI,eAAe,OAAO,CAAC;AAAA,UACxD;AAAA,QACD;AAAA,OACA;AAAA,IAEH;AAGC,UAAM,OAAO,CAAC,QAAQ;AACtBA,oBAAAA,MAAI,WAAW;AAAA,QACd;AAAA,OACA;AAAA,IACF;AAEC,WAAO;AAAA,MACP;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAAA,EACD;AACA;;;;;;;;;;;;;;;;;;;ACrGA,GAAG,gBAAgB,SAAS;"}