{"version":3,"file":"UserInfoEdit.js","sources":["pages/Front/UserInfoEdit.vue","../../HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvRnJvbnQvVXNlckluZm9FZGl0LnZ1ZQ"],"sourcesContent":["<template>\n\t<view>\n\t\t<uni-nav-bar dark :fixed=\"true\" shadow background-color=\"var(--primary-color)\" status-bar left-icon=\"left\"\n\t\t\tleft-text=\"返回\" @clickLeft=\"goBack\" title=\"修改个人信息\" />\n\n\t\t<uni-section title=\"请填写用户信息\">\n\t\t\t<view class=\"form-container\">\n\t\t\t\t<!-- 基础用法，不包含校验规则 -->\n\t\t\t\t<uni-forms ref=\"editModalForm\" :model=\"formData\" :rules=\"editModalFormRules\" label-width='100'\n\t\t\t\t\tlabel-position='top'>\n\t\t\t\t\t<uni-forms-item label=\"名称\" required name=\"Name\">\n\t\t\t\t\t\t<uni-easyinput v-model=\"formData.Name\" placeholder=\"请输入姓名\" primaryColor=\"var(--primary-color)\" />\n\t\t\t\t\t</uni-forms-item>\n\t\t\t\t\t<uni-forms-item label=\"邮箱\" required name=\"Email\">\n\t\t\t\t\t\t<uni-easyinput v-model=\"formData.Email\" placeholder=\"请输入邮箱\" primaryColor=\"var(--primary-color)\" />\n\t\t\t\t\t</uni-forms-item>\n\t\t\t\t\t<uni-forms-item label=\"手机号码\" required name=\"PhoneNumber\">\n\t\t\t\t\t\t<uni-easyinput v-model=\"formData.PhoneNumber\" placeholder=\"请输入手机号码\"\n\t\t\t\t\t\t\tprimaryColor=\"var(--primary-color)\" />\n\t\t\t\t\t</uni-forms-item>\n\t\t\t\t\n\t\t\t\t\t<uni-forms-item label=\"性别\" required name=\"Gender\">\n\t\t\t\t\t\t<uni-data-checkbox\n\t\t\t\t\t\t\tv-model=\"formData.Gender\"\n\t\t\t\t\t\t\t:localdata=\"[\n\t\t\t\t\t\t\t\t{ text: '男', value: '男' },\n\t\t\t\t\t\t\t\t{ text: '女', value: '女' }\n\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t\tclass=\"custom-picker\" />\n\t\t\t\t\t</uni-forms-item>\n\t\t\t\t\t<uni-forms-item label=\"出生时间\" required name=\"Birth\">\n\t\t\t\t\t\t<uni-datetime-picker type=\"datetime\" return-type=\"string\" v-model=\"formData.Birth\"\n\t\t\t\t\t\t\tformat=\"yyyy-MM-dd HH:mm:ss\" primaryColor=\"var(--primary-color)\" />\n\t\t\t\t\t</uni-forms-item>\n\t\t\t\t\t<uni-forms-item label=\"上传头像\" name=\"ImageUrls\">\n\t\t\t\t\t\t<upload-images :limit=\"1\" v-model=\"formData.ImageUrls\" />\n\t\t\t\t\t</uni-forms-item>\n\t\t\t\t</uni-forms>\n\t\t\t\t\n\t\t\t\t<button class=\"btn-primary\" @click=\"createOrEditAsync\">提交</button>\n\t\t\t</view>\n\n\t\t</uni-section>\n\n\n\t</view>\n</template>\n\n<script setup>\n\nimport { useCommonStore } from '@/store';\nimport { Post } from \"@/utils/http\";\nimport { onLoad, onShow } from \"@dcloudio/uni-app\";\nimport { computed, reactive, ref } from 'vue';\n\n// 获取store\nconst commonStore = useCommonStore();\nconst Token = computed(() => commonStore.Token)\nconst UserInfo = computed(() => commonStore.UserInfo)\nconst RoleType = computed(() => commonStore.RoleType)\nconst UserId = computed(() => commonStore.UserId)\n\n\n// 表单数据和规则\nconst formData = reactive({\n});\nconst editModalForm = ref(null);\n\nconst editModalFormRules = {\n\tName: {\n\t\trules: [{\n\t\t\trequired: true,\n\t\t\terrorMessage: '该项为必填项'\n\t\t}]\n\t},\n\tEmail: {\n\t\trules: [{\n\t\t\trequired: true,\n\t\t\terrorMessage: '该项为必填项'\n\t\t}]\n\t},\n\tPhoneNumber: {\n\t\trules: [{\n\t\t\trequired: true,\n\t\t\terrorMessage: '该项为必填项'\n\t\t}]\n\t},\n\tBirth: {\n\t\trules: [{\n\t\t\trequired: true,\n\t\t\terrorMessage: '该项为必填项'\n\t\t}]\n\t},\n\tImageUrls: {\n\t\trules: [{\n\t\t\trequired: true,\n\t\t\terrorMessage: '该项为必填项'\n\t\t}]\n\t},\n};\n\n\n// 生命周期钩子\nonLoad(async () => {\n\tlet { Data } = await commonStore.GetInfo();\n\tObject.assign(formData, Data);\n\t// 设置自定义表单校验规则，必须在节点渲染完毕后执行\n\teditModalForm.value.setRules(editModalFormRules);\n});\n\nonShow(async () => {\n\t// 页面显示时的逻辑\n});\n\n// 方法\nconst goBack = () => {\n\tuni.navigateBack();\n};\n\n// 创建或修改方法\nconst createOrEditAsync = async () => {\n\teditModalForm.value.validate().then(res => {\n\t\tuni.showModal({\n\t\t\ttitle: \"提示\",\n\t\t\tcontent: \"你确定要操作吗?\",\n\t\t\tshowCancel: true,\n\t\t\tcancelText: \"取消\",\n\t\t\tconfirmText: \"确定\",\n\t\t\tsuccess: async (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tlet { Data, Success } = await Post(\"/User/CreateOrEdit\", formData);\n\t\t\t\t\tif (Success) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"操作成功\",\n\t\t\t\t\t\t\ticon: \"success\"\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait commonStore.GetInfo();\n\t\t\t\t\t\tuni.navigateBack();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t}).catch(err => {\n\t\t\n\t});\n\n\n};\n</script>\n\n<style scoped lang=\"scss\"></style>","import MiniProgramPage from 'F:/workspace/HealthControl.uniapp/pages/Front/UserInfoEdit.vue'\nwx.createPage(MiniProgramPage)"],"names":["useCommonStore","computed","reactive","ref","onLoad","onShow","uni","res","Post","MiniProgramPage"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA,UAAM,cAAcA,YAAc,eAAA;AACpBC,kBAAAA,SAAS,MAAM,YAAY,KAAK;AAC7BA,kBAAAA,SAAS,MAAM,YAAY,QAAQ;AACnCA,kBAAAA,SAAS,MAAM,YAAY,QAAQ;AACrCA,kBAAAA,SAAS,MAAM,YAAY,MAAM;AAIhD,UAAM,WAAWC,cAAAA,SAAS,CAC1B,CAAC;AACD,UAAM,gBAAgBC,cAAAA,IAAI,IAAI;AAE9B,UAAM,qBAAqB;AAAA,MAC1B,MAAM;AAAA,QACL,OAAO,CAAC;AAAA,UACP,UAAU;AAAA,UACV,cAAc;AAAA,QACjB,CAAG;AAAA,MACD;AAAA,MACD,OAAO;AAAA,QACN,OAAO,CAAC;AAAA,UACP,UAAU;AAAA,UACV,cAAc;AAAA,QACjB,CAAG;AAAA,MACD;AAAA,MACD,aAAa;AAAA,QACZ,OAAO,CAAC;AAAA,UACP,UAAU;AAAA,UACV,cAAc;AAAA,QACjB,CAAG;AAAA,MACD;AAAA,MACD,OAAO;AAAA,QACN,OAAO,CAAC;AAAA,UACP,UAAU;AAAA,UACV,cAAc;AAAA,QACjB,CAAG;AAAA,MACD;AAAA,MACD,WAAW;AAAA,QACV,OAAO,CAAC;AAAA,UACP,UAAU;AAAA,UACV,cAAc;AAAA,QACjB,CAAG;AAAA,MACD;AAAA,IACF;AAIAC,kBAAAA,OAAO,YAAY;AAClB,UAAI,EAAE,KAAM,IAAG,MAAM,YAAY,QAAO;AACxC,aAAO,OAAO,UAAU,IAAI;AAE5B,oBAAc,MAAM,SAAS,kBAAkB;AAAA,IAChD,CAAC;AAEDC,kBAAAA,OAAO,YAAY;AAAA,IAEnB,CAAC;AAGD,UAAM,SAAS,MAAM;AACpBC,oBAAG,MAAC,aAAY;AAAA,IACjB;AAGA,UAAM,oBAAoB,YAAY;AACrC,oBAAc,MAAM,WAAW,KAAK,SAAO;AAC1CA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,SAAS;AAAA,UACT,YAAY;AAAA,UACZ,YAAY;AAAA,UACZ,aAAa;AAAA,UACb,SAAS,OAAOC,SAAQ;AACvB,gBAAIA,KAAI,SAAS;AAChB,kBAAI,EAAE,MAAM,QAAS,IAAG,MAAMC,WAAAA,KAAK,sBAAsB,QAAQ;AACjE,kBAAI,SAAS;AACZF,8BAAAA,MAAI,UAAU;AAAA,kBACb,OAAO;AAAA,kBACP,MAAM;AAAA,gBACb,CAAO;AACD,sBAAM,YAAY;AAClBA,8BAAG,MAAC,aAAY;AAAA,cAChB;AAAA,YACD;AAAA,UACD;AAAA,QACJ,CAAG;AAAA,MAEH,CAAE,EAAE,MAAM,SAAO;AAAA,MAEjB,CAAE;AAAA,IAGF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnJA,GAAG,WAAWG,SAAe;"}