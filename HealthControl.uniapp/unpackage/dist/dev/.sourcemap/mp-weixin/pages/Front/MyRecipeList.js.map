{"version":3,"file":"MyRecipeList.js","sources":["pages/Front/MyRecipeList.vue","../../HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvRnJvbnQvTXlSZWNpcGVMaXN0LnZ1ZQ"],"sourcesContent":["<template>\r\n    <view class=\"recipe-container\">\r\n        <!-- 导航栏 -->\r\n        <uni-nav-bar dark :fixed=\"true\" shadow background-color=\"var(--primary-color)\" status-bar left-icon=\"left\"\r\n            left-text=\"返回\" @clickLeft=\"goBack\" title=\"我的食谱\" />\r\n\r\n        <!-- 内容区域 -->\r\n        <view class=\"content-wrapper\">\r\n            <!-- 食谱列表 -->\r\n            <view class=\"recipe-list\" v-if=\"RecipeList.length > 0\">\r\n                <view class=\"recipe-item\" v-for=\"recipe in RecipeList\" :key=\"recipe.Id\">\r\n                    <!-- 视频区域 -->\r\n                    <view class=\"recipe-video\" v-if=\"recipe.VideoUrl\">\r\n                        <video :src=\"recipe.VideoUrl\" class=\"video-player\" controls></video>\r\n                        <view class=\"audit-status\" :class=\"getStatusClass(recipe.AuditStatus)\">\r\n                            {{ recipe.AuditStatusFormat }}\r\n                        </view>\r\n                    </view>\r\n\r\n                    <!-- 食谱信息 -->\r\n                    <view class=\"recipe-info\">\r\n                        <view class=\"recipe-title\">{{ recipe.Title }}</view>\r\n                        <view class=\"recipe-meta\">\r\n                            <text class=\"meta-item\">\r\n                                <uni-icons type=\"eye\" size=\"14\" color=\"#999\"></uni-icons>\r\n                                {{ recipe.ViewCount }}次浏览\r\n                            </text>\r\n                            <text class=\"meta-item\">\r\n                                <uni-icons type=\"calendar\" size=\"14\" color=\"#999\"></uni-icons>\r\n                                {{ formatDate(recipe.CreationTime) }}\r\n                            </text>\r\n                        </view>\r\n\r\n                        <!-- 审核回复 -->\r\n                        <view class=\"audit-reply\" v-if=\"recipe.AuditReply\">\r\n                            <text class=\"reply-label\">审核意见：</text>\r\n                            <text class=\"reply-content\">{{ recipe.AuditReply }}</text>\r\n                        </view>\r\n                    </view>\r\n\r\n                    <!-- 操作按钮 -->\r\n                    <view class=\"recipe-actions\">\r\n                        <view class=\"action-btn edit-btn\" @click=\"goToEdit(recipe.Id)\">\r\n                            <uni-icons type=\"compose\" size=\"16\" color=\"#007AFF\"></uni-icons>\r\n                            <text class=\"btn-text\">编辑</text>\r\n                        </view>\r\n                        <view class=\"action-btn delete-btn\" @click=\"ShowDeleteModal(recipe.Id)\">\r\n                            <uni-icons type=\"trash\" size=\"16\" color=\"#FF3B30\"></uni-icons>\r\n                            <text class=\"btn-text\">删除</text>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n\r\n            <!-- 空状态 -->\r\n            <view class=\"empty-state\" v-else>\r\n                <uni-icons type=\"document\" size=\"80\" color=\"#ccc\"></uni-icons>\r\n                <text class=\"empty-text\">暂无食谱</text>\r\n                <text class=\"empty-desc\">点击上方按钮创建您的第一个食谱吧</text>\r\n            </view>\r\n        </view>\r\n\r\n        <!-- 底部新增按钮 -->\r\n        <view class=\"add-button-container\">\r\n            <view class=\"add-button\" @click=\"goToAdd\">\r\n                <uni-icons type=\"plus\" size=\"20\" color=\"#fff\"></uni-icons>\r\n                <text class=\"add-text\">新增食谱</text>\r\n            </view>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport { useCommonStore } from '@/store';\r\nimport { Post } from '@/utils/http';\r\nimport { onLoad, onReady, onShow } from \"@dcloudio/uni-app\";\r\nimport { computed, reactive, ref } from 'vue';\r\n\r\n// 获取store\r\nconst commonStore = useCommonStore();\r\nconst Token = computed(() => commonStore.Token)\r\nconst UserInfo = computed(() => commonStore.UserInfo)\r\nconst RoleType = computed(() => commonStore.RoleType)\r\nconst UserId = computed(() => commonStore.UserId)\r\n\r\n// 食谱列表数据\r\nconst RecipeList = ref([]);\r\n\r\nconst where = reactive({\r\n    // 可以添加筛选条件\r\n    PublishUserId: UserId.value\r\n});\r\n\r\n// 生命周期钩子\r\nonLoad(async (option) => {\r\n});\r\n\r\nonShow(async () => {\r\n    GetRecipeListApi();\r\n});\r\n\r\nonReady(async () => {\r\n\r\n});\r\n\r\n// 方法\r\nconst goBack = () => {\r\n    uni.navigateBack();\r\n};\r\n\r\n// 跳转到新增页面\r\nconst goToAdd = () => {\r\n    uni.navigateTo({\r\n        url: '/pages/Front/RecipeForm'\r\n    });\r\n};\r\n\r\n// 跳转到编辑页面\r\nconst goToEdit = (id) => {\r\n    uni.navigateTo({\r\n        url: `/pages/Front/RecipeForm?Id=${id}`\r\n    });\r\n};\r\n\r\n// 获取食谱列表\r\nconst GetRecipeListApi = async () => {\r\n    try {\r\n        let {\r\n            Data: {\r\n                Items\r\n            }\r\n        } = await Post('/Recipe/List', where);\r\n        RecipeList.value = Items || [];\r\n    } catch (error) {\r\n        console.error('获取食谱列表失败:', error);\r\n        uni.showToast({\r\n            title: '获取数据失败',\r\n            icon: 'none'\r\n        });\r\n    }\r\n}\r\n\r\n// 删除食谱\r\nconst ShowDeleteModal = async (Id) => {\r\n    uni.showModal({\r\n        title: '提示',\r\n        content: '确认删除该食谱吗？',\r\n        success: async (res) => {\r\n            if (res.confirm) {\r\n                try {\r\n                    const { Success } = await Post(`/Recipe/Delete`, { Id: Id });\r\n                    if (Success) {\r\n                        await GetRecipeListApi();\r\n                        uni.showToast({\r\n                            title: '删除成功',\r\n                            icon: 'success'\r\n                        });\r\n                    }\r\n                } catch (error) {\r\n                    console.error('删除失败:', error);\r\n                    uni.showToast({\r\n                        title: '删除失败',\r\n                        icon: 'none'\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    })\r\n};\r\n\r\n// 获取审核状态样式类\r\nconst getStatusClass = (status) => {\r\n    switch (status) {\r\n        case 2: return 'status-approved'; // 审核通过\r\n        case 1: return 'status-pending';  // 待审核\r\n        case 3: return 'status-rejected'; // 审核拒绝\r\n        default: return 'status-pending';\r\n    }\r\n};\r\n\r\n// 格式化日期\r\nconst formatDate = (dateString) => {\r\n    if (!dateString) return '';\r\n    const date = new Date(dateString);\r\n    return `${date.getMonth() + 1}-${date.getDate()}`;\r\n};\r\n\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n/* 容器样式 */\r\n.recipe-container {\r\n    min-height: 100vh;\r\n    background-color: #f5f5f5;\r\n}\r\n\r\n/* 内容区域 */\r\n.content-wrapper {\r\n    padding: 20rpx 30rpx 100rpx 30rpx;\r\n    min-height: calc(100vh - 360rpx);\r\n}\r\n\r\n/* 食谱列表样式 */\r\n.recipe-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 30rpx;\r\n}\r\n\r\n.recipe-item {\r\n    background: white;\r\n    border-radius: 20rpx;\r\n    overflow: hidden;\r\n    box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);\r\n    transition: all 0.3s ease;\r\n}\r\n\r\n.recipe-item:active {\r\n    transform: translateY(-2rpx);\r\n    box-shadow: 0 8rpx 30rpx rgba(0, 0, 0, 0.12);\r\n}\r\n\r\n/* 视频区域 */\r\n.recipe-video {\r\n    position: relative;\r\n    height: 400rpx;\r\n    background-color: #000;\r\n    /* 确保视频背景为黑色 */\r\n}\r\n\r\n.video-player {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n}\r\n\r\n.audit-status {\r\n    position: absolute;\r\n    top: 20rpx;\r\n    right: 20rpx;\r\n    padding: 8rpx 16rpx;\r\n    border-radius: 20rpx;\r\n    font-size: 24rpx;\r\n    color: white;\r\n    font-weight: 500;\r\n}\r\n\r\n.status-approved {\r\n    background-color: #34c759;\r\n}\r\n\r\n.status-pending {\r\n    background-color: #ff9500;\r\n}\r\n\r\n.status-rejected {\r\n    background-color: #ff3b30;\r\n}\r\n\r\n/* 食谱信息 */\r\n.recipe-info {\r\n    padding: 30rpx;\r\n}\r\n\r\n.recipe-title {\r\n    font-size: 36rpx;\r\n    font-weight: 600;\r\n    color: #333;\r\n    margin-bottom: 20rpx;\r\n    line-height: 1.4;\r\n}\r\n\r\n.recipe-meta {\r\n    display: flex;\r\n    gap: 30rpx;\r\n    margin-bottom: 20rpx;\r\n}\r\n\r\n.meta-item {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8rpx;\r\n    font-size: 26rpx;\r\n    color: #999;\r\n}\r\n\r\n/* 审核回复 */\r\n.audit-reply {\r\n    background-color: #f8f9fa;\r\n    padding: 20rpx;\r\n    border-radius: 12rpx;\r\n    border-left: 4rpx solid var(--primary-color);\r\n}\r\n\r\n.reply-label {\r\n    font-size: 24rpx;\r\n    color: #666;\r\n    font-weight: 500;\r\n}\r\n\r\n.reply-content {\r\n    font-size: 26rpx;\r\n    color: #333;\r\n    margin-left: 10rpx;\r\n}\r\n\r\n/* 操作按钮区 */\r\n.recipe-actions {\r\n    display: flex;\r\n    padding: 0 30rpx 30rpx;\r\n    gap: 24rpx;\r\n    margin-top: auto;\r\n}\r\n\r\n/* 操作按钮 */\r\n.action-btn {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 12rpx 24rpx;\r\n    border-radius: 12rpx;\r\n    border: 2rpx solid;\r\n\r\n    .btn-text {\r\n        font-size: 24rpx;\r\n        margin-left: 8rpx;\r\n    }\r\n\r\n    &.edit-btn {\r\n        border-color: var(--primary-color);\r\n        background: rgba(16, 185, 129, 0.1);\r\n\r\n        .btn-text {\r\n            color: var(--primary-color);\r\n        }\r\n    }\r\n\r\n    &.delete-btn {\r\n        border-color: #FF3B30;\r\n        background: rgba(255, 59, 48, 0.1);\r\n\r\n        .btn-text {\r\n            color: #FF3B30;\r\n        }\r\n    }\r\n}\r\n\r\n/* 空状态 */\r\n.empty-state {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 120rpx 60rpx;\r\n    text-align: center;\r\n}\r\n\r\n.empty-text {\r\n    font-size: 32rpx;\r\n    color: #999;\r\n    margin: 30rpx 0 15rpx;\r\n    font-weight: 500;\r\n}\r\n\r\n.empty-desc {\r\n    font-size: 26rpx;\r\n    color: #ccc;\r\n    line-height: 1.5;\r\n}\r\n\r\n/* 底部新增按钮容器 */\r\n.add-button-container {\r\n    position: fixed;\r\n    bottom: 40rpx;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    z-index: 100;\r\n}\r\n\r\n/* 新增按钮 */\r\n.add-button {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background: var(--primary-color, #10b981);\r\n    border-radius: 50rpx;\r\n    padding: 24rpx 48rpx;\r\n    box-shadow: 0 8rpx 24rpx rgba(16, 185, 129, 0.3);\r\n\r\n    .add-text {\r\n        color: #fff;\r\n        font-size: 32rpx;\r\n        font-weight: 500;\r\n        margin-left: 12rpx;\r\n    }\r\n}\r\n</style>","import MiniProgramPage from 'F:/workspace/HealthControl.uniapp/pages/Front/MyRecipeList.vue'\nwx.createPage(MiniProgramPage)"],"names":["useCommonStore","computed","ref","reactive","onLoad","onShow","onReady","uni","Post"],"mappings":";;;;;;;;;;;;;;;;;AAgFA,UAAM,cAAcA,YAAc,eAAA;AACpBC,kBAAAA,SAAS,MAAM,YAAY,KAAK;AAC7BA,kBAAAA,SAAS,MAAM,YAAY,QAAQ;AACnCA,kBAAAA,SAAS,MAAM,YAAY,QAAQ;AACpD,UAAM,SAASA,cAAQ,SAAC,MAAM,YAAY,MAAM;AAGhD,UAAM,aAAaC,cAAAA,IAAI,CAAA,CAAE;AAEzB,UAAM,QAAQC,cAAAA,SAAS;AAAA;AAAA,MAEnB,eAAe,OAAO;AAAA,IAC1B,CAAC;AAGDC,kBAAM,OAAC,OAAO,WAAW;AAAA,IACzB,CAAC;AAEDC,kBAAAA,OAAO,YAAY;AACf;IACJ,CAAC;AAEDC,kBAAAA,QAAQ,YAAY;AAAA,IAEpB,CAAC;AAGD,UAAM,SAAS,MAAM;AACjBC,oBAAG,MAAC,aAAY;AAAA,IACpB;AAGA,UAAM,UAAU,MAAM;AAClBA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK;AAAA,MACb,CAAK;AAAA,IACL;AAGA,UAAM,WAAW,CAAC,OAAO;AACrBA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK,8BAA8B,EAAE;AAAA,MAC7C,CAAK;AAAA,IACL;AAGA,UAAM,mBAAmB,YAAY;AACjC,UAAI;AACA,YAAI;AAAA,UACA,MAAM;AAAA,YACF;AAAA,UACH;AAAA,QACJ,IAAG,MAAMC,WAAI,KAAC,gBAAgB,KAAK;AACpC,mBAAW,QAAQ,SAAS;MAC/B,SAAQ,OAAO;AACZD,sBAAA,MAAA,MAAA,SAAA,uCAAc,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QAClB,CAAS;AAAA,MACJ;AAAA,IACL;AAGA,UAAM,kBAAkB,OAAO,OAAO;AAClCA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,OAAO,QAAQ;AACpB,cAAI,IAAI,SAAS;AACb,gBAAI;AACA,oBAAM,EAAE,YAAY,MAAMC,gBAAK,kBAAkB,EAAE,GAAM,CAAE;AAC3D,kBAAI,SAAS;AACT,sBAAM,iBAAgB;AACtBD,8BAAAA,MAAI,UAAU;AAAA,kBACV,OAAO;AAAA,kBACP,MAAM;AAAA,gBAClC,CAAyB;AAAA,cACJ;AAAA,YACJ,SAAQ,OAAO;AACZA,4BAAA,MAAA,MAAA,SAAA,uCAAc,SAAS,KAAK;AAC5BA,4BAAAA,MAAI,UAAU;AAAA,gBACV,OAAO;AAAA,gBACP,MAAM;AAAA,cAC9B,CAAqB;AAAA,YACJ;AAAA,UACJ;AAAA,QACJ;AAAA,MACT,CAAK;AAAA,IACL;AAGA,UAAM,iBAAiB,CAAC,WAAW;AAC/B,cAAQ,QAAM;AAAA,QACV,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf,KAAK;AAAG,iBAAO;AAAA,QACf;AAAS,iBAAO;AAAA,MACnB;AAAA,IACL;AAGA,UAAM,aAAa,CAAC,eAAe;AAC/B,UAAI,CAAC;AAAY,eAAO;AACxB,YAAM,OAAO,IAAI,KAAK,UAAU;AAChC,aAAO,GAAG,KAAK,aAAa,CAAC,IAAI,KAAK,QAAS,CAAA;AAAA,IACnD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzLA,GAAG,WAAW,eAAe;"}