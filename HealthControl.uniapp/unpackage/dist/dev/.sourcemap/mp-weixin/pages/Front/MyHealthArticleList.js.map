{"version":3,"file":"MyHealthArticleList.js","sources":["pages/Front/MyHealthArticleList.vue","../../HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvRnJvbnQvTXlIZWFsdGhBcnRpY2xlTGlzdC52dWU"],"sourcesContent":["<template>\r\n    <view>\r\n        <!-- 导航栏 -->\r\n        <uni-nav-bar dark :fixed=\"true\" shadow background-color=\"var(--primary-color)\" status-bar left-icon=\"left\"\r\n            left-text=\"返回\" @clickLeft=\"goBack\" title=\"我的健康知识\" />\r\n\r\n        <!-- 文章列表 -->\r\n        <view class=\"article-container\">\r\n            <view v-if=\"HealthArticleList.length === 0\" class=\"empty-state\">\r\n                <text class=\"empty-text\">暂无健康知识文章</text>\r\n            </view>\r\n\r\n            <view v-for=\"article in HealthArticleList\" :key=\"article.Id\" class=\"article-item\">\r\n                <!-- 文章封面 -->\r\n                <image :src=\"article.Cover\" class=\"article-cover\" mode=\"aspectFill\"></image>\r\n\r\n                <!-- 文章内容 -->\r\n                <view class=\"article-content\">\r\n                    <!-- 文章标题 -->\r\n                    <text class=\"article-title\">{{ article.Title }}</text>\r\n\r\n                    <!-- 文章信息 -->\r\n                    <view class=\"article-info\">\r\n                        <text class=\"info-item\">分类: {{ article.HealthArticleTypeDto.Name }}</text>\r\n                        <text class=\"info-item\">浏览: {{ article.ViewCount }}</text>\r\n                        <text class=\"info-item status\"\r\n                            :class=\"{ 'status-pending': article.AuditStatus === 1, 'status-approved': article.AuditStatus === 2 }\">\r\n                            {{ article.AuditStatusFormat }}\r\n                        </text>\r\n                    </view>\r\n\r\n                    <!-- 创建时间 -->\r\n                    <text class=\"article-time\">{{ article.CreationTime }}</text>\r\n\r\n                    <!-- 操作按钮 -->\r\n                    <view class=\"article-actions\">\r\n                        <view class=\"action-btn edit-btn\" @click=\"editArticle(article.Id)\">\r\n                            <uni-icons type=\"compose\" size=\"16\" color=\"#007AFF\"></uni-icons>\r\n                            <text class=\"btn-text\">修改</text>\r\n                        </view>\r\n                        <view class=\"action-btn delete-btn\" @click=\"ShowDeleteModal(article.Id)\">\r\n                            <uni-icons type=\"trash\" size=\"16\" color=\"#FF3B30\"></uni-icons>\r\n                            <text class=\"btn-text\">删除</text>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n        </view>\r\n\r\n        <!-- 底部新增按钮 -->\r\n        <view class=\"add-button-container\">\r\n            <view class=\"add-button\" @click=\"addNewArticle\">\r\n                <uni-icons type=\"plus\" size=\"20\" color=\"#fff\"></uni-icons>\r\n                <text class=\"add-text\">新增文章</text>\r\n            </view>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { useCommonStore } from '@/store';\r\nimport { Post } from '@/utils/http';\r\nimport { onLoad, onReady, onShow } from \"@dcloudio/uni-app\";\r\nimport { computed, reactive, ref } from 'vue';\r\n\r\n// 获取store\r\nconst commonStore = useCommonStore();\r\nconst Token = computed(() => commonStore.Token)\r\nconst UserInfo = computed(() => commonStore.UserInfo)\r\nconst RoleType = computed(() => commonStore.RoleType)\r\nconst UserId = computed(() => commonStore.UserId)\r\n\r\n// 文章列表数据\r\nconst HealthArticleList = ref([]);\r\n\r\nconst where = reactive({\r\n    // 可以添加筛选条件，比如只显示当前用户的文章\r\n    PublishUserId: UserId.value\r\n});\r\n\r\n// 生命周期钩子\r\nonLoad(async (option) => {\r\n});\r\n\r\nonShow(async () => {\r\n    GetHealthArticleListApi();\r\n});\r\n\r\nonReady(async () => {\r\n});\r\n\r\n// 方法\r\nconst goBack = () => {\r\n    uni.navigateBack();\r\n};\r\n\r\n// 获取健康文章列表\r\nconst GetHealthArticleListApi = async () => {\r\n    try {\r\n        let {\r\n            Data: {\r\n                Items\r\n            }\r\n        } = await Post('/HealthArticle/List', where);\r\n        HealthArticleList.value = Items;\r\n    } catch (error) {\r\n        console.error('获取文章列表失败:', error);\r\n        uni.showToast({\r\n            title: '获取数据失败',\r\n            icon: 'none'\r\n        });\r\n    }\r\n}\r\n\r\n// 修改文章\r\nconst editArticle = (articleId) => {\r\n    uni.navigateTo({\r\n        url: `/pages/Front/HealthArticleForm?Id=${articleId}&type=edit`\r\n    });\r\n};\r\n\r\n// 新增文章\r\nconst addNewArticle = () => {\r\n    uni.navigateTo({\r\n        url: '/pages/Front/HealthArticleForm?type=add'\r\n    });\r\n};\r\n\r\n// 删除文章\r\nconst ShowDeleteModal = async (Id) => {\r\n    uni.showModal({\r\n        title: '提示',\r\n        content: '确认删除该健康知识文章吗？',\r\n        success: async (res) => {\r\n            if (res.confirm) {\r\n                try {\r\n                    const { Success } = await Post(`/HealthArticle/Delete`, { Id: Id });\r\n                    if (Success) {\r\n                        await GetHealthArticleListApi();\r\n                        uni.showToast({\r\n                            title: '删除成功',\r\n                            icon: 'success'\r\n                        });\r\n                    }\r\n                } catch (error) {\r\n                    console.error('删除失败:', error);\r\n                    uni.showToast({\r\n                        title: '删除失败',\r\n                        icon: 'none'\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    })\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n/* 文章容器 */\r\n.article-container {\r\n    padding: 0upx 40upx 160upx;\r\n    min-height: calc(100vh - 360upx);\r\n}\r\n\r\n/* 空状态 */\r\n.empty-state {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 600upx;\r\n\r\n    .empty-text {\r\n        color: #999;\r\n        font-size: 32upx;\r\n    }\r\n}\r\n\r\n/* 文章项 */\r\n.article-item {\r\n    display: flex;\r\n    background: #fff;\r\n    border-radius: 24upx;\r\n    margin-bottom: 32upx;\r\n    padding: 32upx;\r\n    box-shadow: 0 4upx 16upx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/* 文章封面 */\r\n.article-cover {\r\n    width: 200upx;\r\n    height: 200upx;\r\n    border-radius: 16upx;\r\n    margin-right: 32upx;\r\n    flex-shrink: 0;\r\n}\r\n\r\n/* 文章内容区 */\r\n.article-content {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n/* 文章标题 */\r\n.article-title {\r\n    font-size: 32upx;\r\n    font-weight: bold;\r\n    color: #333;\r\n    line-height: 44upx;\r\n    margin-bottom: 16upx;\r\n    display: -webkit-box;\r\n    -webkit-box-orient: vertical;\r\n    -webkit-line-clamp: 2;\r\n    overflow: hidden;\r\n}\r\n\r\n/* 文章信息 */\r\n.article-info {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 24upx;\r\n    margin-bottom: 16upx;\r\n\r\n    .info-item {\r\n        font-size: 24upx;\r\n        color: #666;\r\n        padding: 4upx 12upx;\r\n        background: #f5f5f5;\r\n        border-radius: 8upx;\r\n    }\r\n\r\n    .status {\r\n        color: #fff;\r\n\r\n        &.status-pending {\r\n            background: #ff9500;\r\n        }\r\n\r\n        &.status-approved {\r\n            background: #34c759;\r\n        }\r\n    }\r\n}\r\n\r\n/* 创建时间 */\r\n.article-time {\r\n    font-size: 24upx;\r\n    color: #999;\r\n    margin-bottom: 24upx;\r\n}\r\n\r\n/* 操作按钮区 */\r\n.article-actions {\r\n    display: flex;\r\n    gap: 24upx;\r\n    margin-top: auto;\r\n}\r\n\r\n/* 操作按钮 */\r\n.action-btn {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 12upx 24upx;\r\n    border-radius: 12upx;\r\n    border: 2upx solid;\r\n\r\n    .btn-text {\r\n        font-size: 24upx;\r\n        margin-left: 8upx;\r\n    }\r\n\r\n    &.edit-btn {\r\n        border-color: #007AFF;\r\n        background: rgba(0, 122, 255, 0.1);\r\n\r\n        .btn-text {\r\n            color: #007AFF;\r\n        }\r\n    }\r\n\r\n    &.delete-btn {\r\n        border-color: #FF3B30;\r\n        background: rgba(255, 59, 48, 0.1);\r\n\r\n        .btn-text {\r\n            color: #FF3B30;\r\n        }\r\n    }\r\n}\r\n\r\n/* 底部新增按钮容器 */\r\n.add-button-container {\r\n    position: fixed;\r\n    bottom: 40upx;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    z-index: 100;\r\n}\r\n\r\n/* 新增按钮 */\r\n.add-button {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background: var(--primary-color, #007AFF);\r\n    border-radius: 50upx;\r\n    padding: 24upx 48upx;\r\n    box-shadow: 0 8upx 24upx rgba(0, 122, 255, 0.3);\r\n\r\n    .add-text {\r\n        color: #fff;\r\n        font-size: 32upx;\r\n        font-weight: 500;\r\n        margin-left: 12upx;\r\n    }\r\n}\r\n\r\n/* 响应式设计 - 小屏幕适配 */\r\n@media (max-width: 750upx) {\r\n    .article-item {\r\n        flex-direction: column;\r\n    }\r\n\r\n    .article-cover {\r\n        width: 100%;\r\n        height: 240upx;\r\n        margin-right: 0;\r\n        margin-bottom: 24upx;\r\n    }\r\n}\r\n</style>","import MiniProgramPage from 'F:/workspace/HealthControl.uniapp/pages/Front/MyHealthArticleList.vue'\nwx.createPage(MiniProgramPage)"],"names":["useCommonStore","computed","ref","reactive","onLoad","onShow","onReady","uni","Post"],"mappings":";;;;;;;;;;;;;;;;;AAkEA,UAAM,cAAcA,YAAc,eAAA;AACpBC,kBAAAA,SAAS,MAAM,YAAY,KAAK;AAC7BA,kBAAAA,SAAS,MAAM,YAAY,QAAQ;AACnCA,kBAAAA,SAAS,MAAM,YAAY,QAAQ;AACpD,UAAM,SAASA,cAAQ,SAAC,MAAM,YAAY,MAAM;AAGhD,UAAM,oBAAoBC,cAAAA,IAAI,CAAA,CAAE;AAEhC,UAAM,QAAQC,cAAAA,SAAS;AAAA;AAAA,MAEnB,eAAe,OAAO;AAAA,IAC1B,CAAC;AAGDC,kBAAM,OAAC,OAAO,WAAW;AAAA,IACzB,CAAC;AAEDC,kBAAAA,OAAO,YAAY;AACf;IACJ,CAAC;AAEDC,kBAAAA,QAAQ,YAAY;AAAA,IACpB,CAAC;AAGD,UAAM,SAAS,MAAM;AACjBC,oBAAG,MAAC,aAAY;AAAA,IACpB;AAGA,UAAM,0BAA0B,YAAY;AACxC,UAAI;AACA,YAAI;AAAA,UACA,MAAM;AAAA,YACF;AAAA,UACH;AAAA,QACJ,IAAG,MAAMC,WAAI,KAAC,uBAAuB,KAAK;AAC3C,0BAAkB,QAAQ;AAAA,MAC7B,SAAQ,OAAO;AACZD,sBAAA,MAAA,MAAA,SAAA,8CAAc,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QAClB,CAAS;AAAA,MACJ;AAAA,IACL;AAGA,UAAM,cAAc,CAAC,cAAc;AAC/BA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK,qCAAqC,SAAS;AAAA,MAC3D,CAAK;AAAA,IACL;AAGA,UAAM,gBAAgB,MAAM;AACxBA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK;AAAA,MACb,CAAK;AAAA,IACL;AAGA,UAAM,kBAAkB,OAAO,OAAO;AAClCA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,OAAO,QAAQ;AACpB,cAAI,IAAI,SAAS;AACb,gBAAI;AACA,oBAAM,EAAE,YAAY,MAAMC,gBAAK,yBAAyB,EAAE,GAAM,CAAE;AAClE,kBAAI,SAAS;AACT,sBAAM,wBAAuB;AAC7BD,8BAAAA,MAAI,UAAU;AAAA,kBACV,OAAO;AAAA,kBACP,MAAM;AAAA,gBAClC,CAAyB;AAAA,cACJ;AAAA,YACJ,SAAQ,OAAO;AACZA,4BAAA,MAAA,MAAA,SAAA,8CAAc,SAAS,KAAK;AAC5BA,4BAAAA,MAAI,UAAU;AAAA,gBACV,OAAO;AAAA,gBACP,MAAM;AAAA,cAC9B,CAAqB;AAAA,YACJ;AAAA,UACJ;AAAA,QACJ;AAAA,MACT,CAAK;AAAA,IACL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzJA,GAAG,WAAW,eAAe;"}