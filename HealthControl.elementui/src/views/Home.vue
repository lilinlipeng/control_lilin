<template>
    <div class="dashboard-container">
        <!-- é¡µé¢æ ‡é¢˜ -->
        <div class="page-header">
            <h1 class="page-title">ğŸ“Š å¥åº·ç®¡ç†æ•°æ®åˆ†æ</h1>
            <p class="page-subtitle">å…¨é¢äº†è§£ç³»ç»Ÿè¿è¥çŠ¶å†µå’Œç”¨æˆ·å¥åº·æ•°æ®</p>
        </div>

        <!-- æ¦‚è§ˆæ•°æ®å¡ç‰‡ -->
        <div class="overview-section" v-if="DataAnalysis.OverviewData">
            <h2 class="section-title">ğŸ“ˆ ç³»ç»Ÿæ¦‚è§ˆ</h2>
            <div class="overview-cards">
                <div class="overview-card">
                    <div class="card-icon">ğŸ‘¥</div>
                    <div class="card-content">
                        <div class="card-value">{{ DataAnalysis.OverviewData.TotalUsers }}</div>
                        <div class="card-label">æ€»ç”¨æˆ·æ•°</div>
                        <div class="card-trend">ğŸ’™ å¥åº·ç¤¾åŒº</div>
                    </div>
                </div>

                <div class="overview-card">
                    <div class="card-icon">ğŸ“š</div>
                    <div class="card-content">
                        <div class="card-value">{{ DataAnalysis.OverviewData.TotalHealthArticles }}</div>
                        <div class="card-label">å¥åº·æ–‡ç« </div>
                        <div class="card-trend">ğŸ’š çŸ¥è¯†å®åº“</div>
                    </div>
                </div>

                <div class="overview-card">
                    <div class="card-icon">ğŸ½ï¸</div>
                    <div class="card-content">
                        <div class="card-value">{{ DataAnalysis.OverviewData.TotalRecipes }}</div>
                        <div class="card-label">å¥åº·é£Ÿè°±</div>
                        <div class="card-trend">ğŸ§¡ è¥å…»æŒ‡å¯¼</div>
                    </div>
                </div>

                <div class="overview-card">
                    <div class="card-icon">ğŸƒâ€â™€ï¸</div>
                    <div class="card-content">
                        <div class="card-value">{{ DataAnalysis.OverviewData.TotalSports }}</div>
                        <div class="card-label">è¿åŠ¨é¡¹ç›®</div>
                        <div class="card-trend">â¤ï¸ æ´»åŠ›è¿åŠ¨</div>
                    </div>
                </div>

                <div class="overview-card">
                    <div class="card-icon">ğŸ’Š</div>
                    <div class="card-content">
                        <div class="card-value">{{ DataAnalysis.OverviewData.TotalHealthIndicators }}</div>
                        <div class="card-label">å¥åº·æŒ‡æ ‡</div>
                        <div class="card-trend">ğŸ’œ åŒ»ç–—ç›‘æµ‹</div>
                    </div>
                </div>

                <div class="overview-card">
                    <div class="card-icon">ğŸ“‹</div>
                    <div class="card-content">
                        <div class="card-value">{{ DataAnalysis.OverviewData.TotalHealthRecords }}</div>
                        <div class="card-label">å¥åº·è®°å½•</div>
                        <div class="card-trend">ğŸ©µ æ•°æ®æ¡£æ¡ˆ</div>
                    </div>
                </div>

                <div class="overview-card">
                    <div class="card-icon">ğŸ</div>
                    <div class="card-content">
                        <div class="card-value">{{ DataAnalysis.OverviewData.TotalDietRecords }}</div>
                        <div class="card-label">é¥®é£Ÿè®°å½•</div>
                        <div class="card-trend">ğŸ©· è†³é£Ÿç®¡ç†</div>
                    </div>
                </div>

                <div class="overview-card">
                    <div class="card-icon">ğŸ‹ï¸â€â™‚ï¸</div>
                    <div class="card-content">
                        <div class="card-value">{{ DataAnalysis.OverviewData.TotalSportRecords }}</div>
                        <div class="card-label">è¿åŠ¨è®°å½•</div>
                        <div class="card-trend">ğŸ’™ å¥èº«è¿½è¸ª</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç”¨æˆ·åˆ†æ -->
        <div class="user-analysis-section">
            <h2 class="section-title">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ç”¨æˆ·åˆ†æ</h2>
            <div class="charts-row">
                <!-- ç”¨æˆ·æ€§åˆ«åˆ†å¸ƒé¥¼å›¾ -->
                <div class="chart-container user-gender-chart">
                    <div class="chart-header">
                        <h3 class="chart-title gender-title">ğŸ‘« ç”¨æˆ·æ€§åˆ«åˆ†å¸ƒ</h3>
                        <p class="chart-desc">äº†è§£ç”¨æˆ·æ€§åˆ«æ„æˆï¼Œä¼˜åŒ–äº§å“è®¾è®¡</p>
                    </div>
                    <div class="chart-content">
                        <div ref="userGenderChart" class="chart-canvas"></div>
                    </div>
                </div>

                <!-- ç”¨æˆ·å¹´é¾„åˆ†å¸ƒæŸ±çŠ¶å›¾ -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">ğŸ‚ ç”¨æˆ·å¹´é¾„åˆ†å¸ƒ</h3>
                        <p class="chart-desc">åˆ†æä¸åŒå¹´é¾„æ®µç”¨æˆ·å æ¯”</p>
                    </div>
                    <div class="chart-content">
                        <div ref="userAgeChart" class="chart-canvas"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¥åº·æ•°æ®åˆ†æ -->
        <div class="health-analysis-section">
            <h2 class="section-title">ğŸ¥ å¥åº·æ•°æ®åˆ†æ</h2>

            <!-- å¥åº·æŒ‡æ ‡è¶‹åŠ¿ -->
            <div class="chart-container full-width">
                <div class="chart-header">
                    <h3 class="chart-title">ğŸ“ˆ å¥åº·æŒ‡æ ‡è®°å½•è¶‹åŠ¿</h3>
                    <p class="chart-desc">è¿‘30å¤©å„é¡¹å¥åº·æŒ‡æ ‡çš„è®°å½•è¶‹åŠ¿å˜åŒ–</p>
                </div>
                <div class="chart-content">
                    <div ref="healthIndicatorLineChart" class="chart-canvas large"></div>
                </div>
            </div>

            <div class="charts-row">
                <!-- å¼‚å¸¸æŒ‡æ ‡å †å æŸ±çŠ¶å›¾ -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">âš ï¸ å¼‚å¸¸æŒ‡æ ‡ç»Ÿè®¡</h3>
                        <p class="chart-desc">å„é¡¹å¥åº·æŒ‡æ ‡çš„æ­£å¸¸ä¸å¼‚å¸¸è®°å½•å¯¹æ¯”</p>
                    </div>
                    <div class="chart-content">
                        <div ref="abnormalIndicatorChart" class="chart-canvas"></div>
                    </div>
                </div>

                <!-- å¥åº·æŒ‡æ ‡ç±»å‹ç¯å½¢å›¾ -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">ğŸ¯ å¥åº·æŒ‡æ ‡ç±»å‹åˆ†å¸ƒ</h3>
                        <p class="chart-desc">ä¸åŒç±»å‹å¥åº·æŒ‡æ ‡çš„æ•°é‡åˆ†å¸ƒ</p>
                    </div>
                    <div class="chart-content">
                        <div ref="healthIndicatorDoughnutChart" class="chart-canvas"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- é¥®é£Ÿè¿åŠ¨åˆ†æ -->
        <div class="diet-sport-section">
            <h2 class="section-title">ğŸğŸƒâ€â™€ï¸ é¥®é£Ÿè¿åŠ¨åˆ†æ</h2>
            <div class="charts-row">
                <!-- é¥®é£Ÿçƒ­é‡é¢ç§¯å›¾ -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">ğŸ”¥ æ¯æ—¥çƒ­é‡æ‘„å…¥è¶‹åŠ¿</h3>
                        <p class="chart-desc">è¿‘30å¤©ç”¨æˆ·æ¯æ—¥çƒ­é‡æ‘„å…¥å˜åŒ–</p>
                    </div>
                    <div class="chart-content">
                        <div ref="dietCaloriesChart" class="chart-canvas"></div>
                    </div>
                </div>

                <!-- è¿åŠ¨è®°å½•æŸ±çŠ¶å›¾ -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">ğŸƒâ€â™‚ï¸ è¿åŠ¨é¡¹ç›®ç»Ÿè®¡</h3>
                        <p class="chart-desc">å„é¡¹è¿åŠ¨çš„å‚ä¸è®°å½•æ¬¡æ•°</p>
                    </div>
                    <div class="chart-content">
                        <div ref="sportRecordChart" class="chart-canvas"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å†…å®¹äº’åŠ¨åˆ†æ -->
        <div class="engagement-section">
            <h2 class="section-title">ğŸ’¡ å†…å®¹äº’åŠ¨åˆ†æ</h2>
            <div class="charts-row">
                <!-- æ–‡ç« æµè§ˆé‡æ’è¡Œæ¦œ -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">ğŸ“– çƒ­é—¨æ–‡ç« æ’è¡Œ</h3>
                        <p class="chart-desc">æœ€å—æ¬¢è¿çš„å¥åº·çŸ¥è¯†æ–‡ç« TOP10</p>
                    </div>
                    <div class="chart-content">
                        <div ref="articleViewChart" class="chart-canvas"></div>
                    </div>
                </div>

                <!-- æ”¶è—ç‚¹èµä»ªè¡¨ç›˜ -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">â¤ï¸ ç”¨æˆ·äº’åŠ¨ç»Ÿè®¡</h3>
                        <p class="chart-desc">æ”¶è—ã€ç‚¹èµç­‰ç”¨æˆ·äº’åŠ¨æ•°æ®</p>
                    </div>
                    <div class="chart-content">
                        <div ref="engagementGaugeChart" class="chart-canvas"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- é£Ÿç‰©ç±»å‹åˆ†å¸ƒ -->
        <div class="food-section">
            <h2 class="section-title">ğŸ¥— é£Ÿç‰©æ•°æ®åˆ†æ</h2>
            <div class="charts-row">
                <!-- é£Ÿç‰©ç±»å‹åˆ†å¸ƒé¥¼å›¾ -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">ğŸ± é£Ÿç‰©ç±»å‹åˆ†å¸ƒ</h3>
                        <p class="chart-desc">ç³»ç»Ÿä¸­å„ç±»é£Ÿç‰©çš„æ•°é‡åˆ†å¸ƒ</p>
                    </div>
                    <div class="chart-content">
                        <div ref="foodTypeChart" class="chart-canvas"></div>
                    </div>
                </div>

                <!-- é£Ÿè°±å®¡æ ¸çŠ¶æ€æ¼æ–—å›¾ -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">ğŸ“ é£Ÿè°±å®¡æ ¸æµç¨‹</h3>
                        <p class="chart-desc">é£Ÿè°±ä»æäº¤åˆ°å®¡æ ¸é€šè¿‡çš„æµç¨‹ç»Ÿè®¡</p>
                    </div>
                    <div class="chart-content">
                        <div ref="recipeAuditChart" class="chart-canvas"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- é«˜çº§åˆ†æ -->
        <div class="advanced-section">
            <h2 class="section-title">ğŸš€ é«˜çº§åˆ†æ</h2>

            <!-- æœˆåº¦æ•°æ®å¯¹æ¯”é›·è¾¾å›¾ -->
            <div class="chart-container full-width">
                <div class="chart-header">
                    <h3 class="chart-title">ğŸ“Š æœˆåº¦æ•°æ®å¯¹æ¯”</h3>
                    <p class="chart-desc">æœ¬æœˆä¸ä¸Šæœˆå„é¡¹æŒ‡æ ‡çš„å¯¹æ¯”åˆ†æ</p>
                </div>
                <div class="chart-content">
                    <div ref="monthlyRadarChart" class="chart-canvas large"></div>
                </div>
            </div>

            <div class="charts-row">
                <!-- ç”¨æˆ·æ´»è·ƒåº¦çƒ­åŠ›å›¾ -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">ğŸ”¥ ç”¨æˆ·æ´»è·ƒåº¦çƒ­åŠ›å›¾</h3>
                        <p class="chart-desc">ä¸€å‘¨å†…å„æ—¶æ®µç”¨æˆ·æ´»è·ƒåº¦åˆ†å¸ƒ</p>
                    </div>
                    <div class="chart-content">
                        <div ref="userActivityChart" class="chart-canvas"></div>
                    </div>
                </div>

                <!-- å¥åº·æé†’å®Œæˆç‡æ•£ç‚¹å›¾ -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title">â° å¥åº·æé†’å®Œæˆç‡</h3>
                        <p class="chart-desc">æé†’æ¬¡æ•°ä¸å®Œæˆç‡çš„å…³ç³»åˆ†æ</p>
                    </div>
                    <div class="chart-content">
                        <div ref="healthNoticeChart" class="chart-canvas"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>
<script setup>
import defaultAvatar from '@/assets/é»˜è®¤å¤´åƒ.png'; // å¯¼å…¥é»˜è®¤å¤´åƒå›¾ç‰‡
import NoImage from '@/assets/å›¾ç‰‡å¤±æ•ˆ.png';
import { Post, PostSingleUpdate } from '@/api/http';
import { ref, reactive, nextTick, computed, onBeforeMount, onMounted } from 'vue';
import { useRouter, useRoute } from 'vue-router';
import { useCommonStore } from "@/store";
import { ElMessage, ElMessageBox } from 'element-plus';
import * as echarts from 'echarts';

const router = useRouter();
const route = useRoute();
const commonStore = useCommonStore();
const Token = computed(() => commonStore.Token);
const UserInfo = computed(() => commonStore.UserInfo);
const RoleType = computed(() => commonStore.RoleType);
const UserId = computed(() => commonStore.UserId);
const DataAnalysis = ref({});

// å›¾è¡¨refå¼•ç”¨
const userGenderChart = ref(null);
const userAgeChart = ref(null);
const healthIndicatorLineChart = ref(null);
const abnormalIndicatorChart = ref(null);
const healthIndicatorDoughnutChart = ref(null);
const dietCaloriesChart = ref(null);
const sportRecordChart = ref(null);
const articleViewChart = ref(null);
const engagementGaugeChart = ref(null);
const foodTypeChart = ref(null);
const recipeAuditChart = ref(null);
const monthlyRadarChart = ref(null);
const userActivityChart = ref(null);
const healthNoticeChart = ref(null);

// è·å–æ•°æ®åˆ†ææ¥å£
const DataAnalysisApi = async () => {
    const { Data } = await Post("/DataAnalysis/GetAllAnalysisData", {});
    DataAnalysis.value = Data;
    await nextTick();
    initAllCharts();
}

// åˆå§‹åŒ–æ‰€æœ‰å›¾è¡¨
const initAllCharts = () => {
    if (!DataAnalysis.value) return;

    initUserGenderChart();
    initUserAgeChart();
    initHealthIndicatorLineChart();
    initAbnormalIndicatorChart();
    initHealthIndicatorDoughnutChart();
    initDietCaloriesChart();
    initSportRecordChart();
    initArticleViewChart();
    initEngagementGaugeChart();
    initFoodTypeChart();
    initRecipeAuditChart();
    initMonthlyRadarChart();
    initUserActivityChart();
    initHealthNoticeChart();
}

// 1. ç”¨æˆ·æ€§åˆ«åˆ†å¸ƒé¥¼å›¾
const initUserGenderChart = () => {
    if (!userGenderChart.value || !DataAnalysis.value.UserGenderPieChart) return;

    const chart = echarts.init(userGenderChart.value);
    const data = DataAnalysis.value.UserGenderPieChart.map(item => ({
        name: item.Label,
        value: item.Value
    }));

    const option = {
        tooltip: {
            trigger: 'item',
            formatter: '{a} <br/>{b}: {c} ({d}%)'
        },
        legend: {
            orient: 'horizontal',
            left: 'center',
            bottom: '10%'
        },
        series: [{
            name: 'ç”¨æˆ·æ€§åˆ«åˆ†å¸ƒ',
            type: 'pie',
            radius: ['40%', '70%'],
            center: ['50%', '45%'],
            avoidLabelOverlap: false,
            itemStyle: {
                borderRadius: 10,
                borderColor: '#fff',
                borderWidth: 2
            },
            label: {
                show: true,
                formatter: '{b}: {d}%'
            },
            emphasis: {
                label: {
                    show: true,
                    fontSize: '16',
                    fontWeight: 'bold'
                }
            },
            data: data,
            color: ['#5470c6', '#91cc75', '#fac858', '#ee6666']
        }]
    };

    chart.setOption(option);

    // å“åº”å¼å¤„ç†
    window.addEventListener('resize', () => chart.resize());
}

// 2. ç”¨æˆ·å¹´é¾„åˆ†å¸ƒæŸ±çŠ¶å›¾
const initUserAgeChart = () => {
    if (!userAgeChart.value || !DataAnalysis.value.UserAgeBarChart) return;

    const chart = echarts.init(userAgeChart.value);
    const data = DataAnalysis.value.UserAgeBarChart;

    const option = {
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: {
            type: 'category',
            data: data.map(item => item.Label),
            axisTick: {
                alignWithLabel: true
            }
        },
        yAxis: {
            type: 'value'
        },
        series: [{
            name: 'ç”¨æˆ·æ•°é‡',
            type: 'bar',
            barWidth: '60%',
            itemStyle: {
                borderRadius: [4, 4, 0, 0],
                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                    { offset: 0, color: '#83bff6' },
                    { offset: 0.5, color: '#188df0' },
                    { offset: 1, color: '#188df0' }
                ])
            },
            data: data.map(item => item.Value)
        }]
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
}

// 3. å¥åº·æŒ‡æ ‡è®°å½•è¶‹åŠ¿çº¿å›¾
const initHealthIndicatorLineChart = () => {
    if (!healthIndicatorLineChart.value || !DataAnalysis.value.HealthIndicatorLineChart) return;

    const chart = echarts.init(healthIndicatorLineChart.value);
    const rawData = DataAnalysis.value.HealthIndicatorLineChart;

    // æŒ‰æŒ‡æ ‡ç±»å‹åˆ†ç»„æ•°æ®
    const seriesMap = {};
    rawData.forEach(item => {
        if (!seriesMap[item.Series]) {
            seriesMap[item.Series] = [];
        }
        seriesMap[item.Series].push([item.Date, item.Value]);
    });

    // æ„å»ºseriesæ•°æ®
    const series = Object.keys(seriesMap).map((name, index) => ({
        name: name,
        type: 'line',
        smooth: true,
        data: seriesMap[name].sort((a, b) => new Date(a[0]) - new Date(b[0])),
        itemStyle: {
            color: ['#5470c6', '#91cc75', '#fac858', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4'][index % 8]
        }
    }));

    const option = {
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: Object.keys(seriesMap),
            top: '5%'
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: {
            type: 'time',
            boundaryGap: false
        },
        yAxis: {
            type: 'value'
        },
        series: series
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
}

// 4. å¼‚å¸¸æŒ‡æ ‡å †å æŸ±çŠ¶å›¾
const initAbnormalIndicatorChart = () => {
    if (!abnormalIndicatorChart.value || !DataAnalysis.value.AbnormalIndicatorStackedChart) return;

    const chart = echarts.init(abnormalIndicatorChart.value);
    const rawData = DataAnalysis.value.AbnormalIndicatorStackedChart;

    // è·å–æ‰€æœ‰æŒ‡æ ‡åç§°
    const indicators = [...new Set(rawData.map(item => item.Label))];

    // åˆ†åˆ«è·å–æ­£å¸¸å’Œå¼‚å¸¸æ•°æ®
    const normalData = indicators.map(indicator => {
        const item = rawData.find(d => d.Label === indicator && d.Stack === 'æ­£å¸¸');
        return item ? item.Value : 0;
    });

    const abnormalData = indicators.map(indicator => {
        const item = rawData.find(d => d.Label === indicator && d.Stack === 'å¼‚å¸¸');
        return item ? item.Value : 0;
    });

    const option = {
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            }
        },
        legend: {
            data: ['æ­£å¸¸', 'å¼‚å¸¸']
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: {
            type: 'value'
        },
        yAxis: {
            type: 'category',
            data: indicators
        },
        series: [
            {
                name: 'æ­£å¸¸',
                type: 'bar',
                stack: 'total',
                itemStyle: {
                    color: '#91cc75'
                },
                data: normalData
            },
            {
                name: 'å¼‚å¸¸',
                type: 'bar',
                stack: 'total',
                itemStyle: {
                    color: '#ee6666'
                },
                data: abnormalData
            }
        ]
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
}

// 5. å¥åº·æŒ‡æ ‡ç±»å‹ç¯å½¢å›¾
const initHealthIndicatorDoughnutChart = () => {
    if (!healthIndicatorDoughnutChart.value || !DataAnalysis.value.HealthIndicatorDoughnutChart) return;

    const chart = echarts.init(healthIndicatorDoughnutChart.value);
    const data = DataAnalysis.value.HealthIndicatorDoughnutChart.map(item => ({
        name: item.Label,
        value: item.Value
    }));

    const option = {
        tooltip: {
            trigger: 'item'
        },
        legend: {
            orient: 'horizontal',
            left: 'center',
            bottom: '10%'
        },
        series: [{
            name: 'å¥åº·æŒ‡æ ‡ç±»å‹',
            type: 'pie',
            radius: ['50%', '70%'],
            center: ['50%', '45%'],
            avoidLabelOverlap: false,
            itemStyle: {
                borderRadius: 10,
                borderColor: '#fff',
                borderWidth: 2
            },
            label: {
                show: false
            },
            emphasis: {
                label: {
                    show: true,
                    fontSize: '14',
                    fontWeight: 'bold'
                }
            },
            data: data
        }]
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
}

// 6. é¥®é£Ÿçƒ­é‡é¢ç§¯å›¾
const initDietCaloriesChart = () => {
    if (!dietCaloriesChart.value || !DataAnalysis.value.DietCaloriesAreaChart) return;

    const chart = echarts.init(dietCaloriesChart.value);
    const data = DataAnalysis.value.DietCaloriesAreaChart.map(item => [item.Date, window.ToFixed2(item.Value)]);

    const option = {
        tooltip: {
            trigger: 'axis',
            formatter: function (params) {
                return `${params[0].axisValue}<br/>çƒ­é‡æ‘„å…¥: ${params[0].value[1]} åƒå¡`;
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: {
            type: 'time',
            boundaryGap: false
        },
        yAxis: {
            type: 'value',
            name: 'çƒ­é‡(åƒå¡)'
        },
        series: [{
            name: 'æ¯æ—¥çƒ­é‡æ‘„å…¥',
            type: 'line',
            smooth: true,
            areaStyle: {
                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                    { offset: 0, color: 'rgba(255, 158, 68, 0.8)' },
                    { offset: 1, color: 'rgba(255, 158, 68, 0.1)' }
                ])
            },
            itemStyle: {
                color: '#ff9e44'
            },
            data: data
        }]
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
}

// 7. è¿åŠ¨è®°å½•æŸ±çŠ¶å›¾
const initSportRecordChart = () => {
    if (!sportRecordChart.value || !DataAnalysis.value.SportRecordBarChart) return;

    const chart = echarts.init(sportRecordChart.value);
    const data = DataAnalysis.value.SportRecordBarChart;

    const option = {
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: {
            type: 'value'
        },
        yAxis: {
            type: 'category',
            data: data.map(item => item.Label)
        },
        series: [{
            name: 'è¿åŠ¨æ¬¡æ•°',
            type: 'bar',
            itemStyle: {
                borderRadius: [0, 4, 4, 0],
                color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [
                    { offset: 0, color: '#73c0de' },
                    { offset: 1, color: '#3ba272' }
                ])
            },
            data: data.map(item => item.Value)
        }]
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
}

// 8. æ–‡ç« æµè§ˆé‡æ’è¡Œæ¦œ
const initArticleViewChart = () => {
    if (!articleViewChart.value || !DataAnalysis.value.ArticleViewRankingChart) return;

    const chart = echarts.init(articleViewChart.value);
    const data = DataAnalysis.value.ArticleViewRankingChart.slice(0, 10); // åªæ˜¾ç¤ºå‰10

    const option = {
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: {
            type: 'value'
        },
        yAxis: {
            type: 'category',
            data: data.map(item => item.Label.length > 15 ? item.Label.substring(0, 15) + '...' : item.Label),
            inverse: true
        },
        series: [{
            name: 'æµè§ˆé‡',
            type: 'bar',
            itemStyle: {
                borderRadius: [0, 4, 4, 0],
                color: function (params) {
                    const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57'];
                    return colors[params.dataIndex % colors.length];
                }
            },
            data: data.map(item => item.Value)
        }]
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
}

// 9. æ”¶è—ç‚¹èµä»ªè¡¨ç›˜
const initEngagementGaugeChart = () => {
    if (!engagementGaugeChart.value || !DataAnalysis.value.EngagementGaugeChart) return;

    const chart = echarts.init(engagementGaugeChart.value);
    const data = DataAnalysis.value.EngagementGaugeChart;

    const option = {
        series: data.map((item, index) => ({
            name: item.Label,
            type: 'gauge',
            center: [`${25 + index * 25}%`, '60%'],
            radius: '50%',
            min: 0,
            max: item.MaxValue,
            splitNumber: 5,
            axisLine: {
                lineStyle: {
                    width: 8,
                    color: [
                        [0.2, '#67e0e3'],
                        [0.8, '#37a2da'],
                        [1, '#fd666d']
                    ]
                }
            },
            pointer: {
                itemStyle: {
                    color: 'auto'
                }
            },
            axisTick: {
                distance: -20,
                length: 8,
                lineStyle: {
                    color: '#fff',
                    width: 2
                }
            },
            splitLine: {
                distance: -20,
                length: 20,
                lineStyle: {
                    color: '#fff',
                    width: 4
                }
            },
            axisLabel: {
                color: 'auto',
                distance: 30,
                fontSize: 10
            },
            detail: {
                valueAnimation: true,
                formatter: '{value}',
                color: 'auto',
                fontSize: 14,
                offsetCenter: [0, '70%']
            },
            title: {
                fontSize: 12,
                offsetCenter: [0, '90%']
            },
            data: [{
                value: item.Value,
                name: item.Label
            }]
        }))
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
}

// 10. é£Ÿç‰©ç±»å‹åˆ†å¸ƒé¥¼å›¾
const initFoodTypeChart = () => {
    if (!foodTypeChart.value || !DataAnalysis.value.FoodTypeDistributionChart) return;

    const chart = echarts.init(foodTypeChart.value);
    const data = DataAnalysis.value.FoodTypeDistributionChart.map(item => ({
        name: item.Label,
        value: item.Value
    }));

    const option = {
        tooltip: {
            trigger: 'item',
            formatter: '{a} <br/>{b}: {c} ({d}%)'
        },
        legend: {
            orient: 'horizontal',
            left: 'center',
            bottom: '10%'
        },
        series: [{
            name: 'é£Ÿç‰©ç±»å‹åˆ†å¸ƒ',
            type: 'pie',
            radius: '65%',
            center: ['50%', '45%'],
            itemStyle: {
                borderRadius: 6,
                borderColor: '#fff',
                borderWidth: 2
            },
            label: {
                show: true,
                formatter: '{b}: {d}%'
            },
            data: data
        }]
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
}

// 11. é£Ÿè°±å®¡æ ¸çŠ¶æ€æ¼æ–—å›¾
const initRecipeAuditChart = () => {
    if (!recipeAuditChart.value || !DataAnalysis.value.RecipeAuditFunnelChart) return;

    const chart = echarts.init(recipeAuditChart.value);
    const data = DataAnalysis.value.RecipeAuditFunnelChart.map(item => ({
        name: item.Label,
        value: item.Value
    }));

    const option = {
        tooltip: {
            trigger: 'item',
            formatter: '{a} <br/>{b}: {c}'
        },
        series: [{
            name: 'é£Ÿè°±å®¡æ ¸æµç¨‹',
            type: 'funnel',
            left: '10%',
            top: 60,
            bottom: 60,
            width: '80%',
            min: 0,
            max: Math.max(...data.map(d => d.value)),
            minSize: '0%',
            maxSize: '100%',
            sort: 'descending',
            gap: 2,
            label: {
                show: true,
                position: 'inside'
            },
            itemStyle: {
                borderColor: '#fff',
                borderWidth: 1
            },
            emphasis: {
                label: {
                    fontSize: 20
                }
            },
            data: data
        }]
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
}

// 12. æœˆåº¦æ•°æ®å¯¹æ¯”é›·è¾¾å›¾
const initMonthlyRadarChart = () => {
    if (!monthlyRadarChart.value || !DataAnalysis.value.MonthlyDataRadarChart) return;

    const chart = echarts.init(monthlyRadarChart.value);
    const radarData = DataAnalysis.value.MonthlyDataRadarChart;

    const option = {
        tooltip: {},
        legend: {
            data: radarData.Datasets.map(item => item.Label),
            bottom: '10%'
        },
        radar: {
            indicator: radarData.Labels.map(label => ({
                name: label,
                max: Math.max(...radarData.Datasets.flatMap(d => d.Data)) * 1.2
            }))
        },
        series: [{
            name: 'æœˆåº¦æ•°æ®å¯¹æ¯”',
            type: 'radar',
            data: radarData.Datasets.map(dataset => ({
                value: dataset.Data,
                name: dataset.Label
            }))
        }]
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
}

// 13. ç”¨æˆ·æ´»è·ƒåº¦çƒ­åŠ›å›¾
const initUserActivityChart = () => {
    if (!userActivityChart.value || !DataAnalysis.value.UserActivityHeatmapChart) return;

    const chart = echarts.init(userActivityChart.value);
    const data = DataAnalysis.value.UserActivityHeatmapChart;

    const hours = Array.from({ length: 24 }, (_, i) => i + 'æ—¶');
    const days = ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'];

    const heatmapData = data.map(item => [item.Hour, days.indexOf(item.Day), item.Value]);

    const option = {
        tooltip: {
            position: 'top',
            formatter: function (params) {
                return `${days[params.value[1]]} ${params.value[0]}æ—¶<br/>æ´»è·ƒåº¦: ${params.value[2]}`;
            }
        },
        grid: {
            height: '50%',
            top: '10%'
        },
        xAxis: {
            type: 'category',
            data: hours,
            splitArea: {
                show: true
            }
        },
        yAxis: {
            type: 'category',
            data: days,
            splitArea: {
                show: true
            }
        },
        visualMap: {
            min: 0,
            max: 100,
            calculable: true,
            orient: 'horizontal',
            left: 'center',
            bottom: '15%',
            inRange: {
                color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
            }
        },
        series: [{
            name: 'ç”¨æˆ·æ´»è·ƒåº¦',
            type: 'heatmap',
            data: heatmapData,
            label: {
                show: false
            },
            emphasis: {
                itemStyle: {
                    shadowBlur: 10,
                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                }
            }
        }]
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
}

// 14. å¥åº·æé†’å®Œæˆç‡æ•£ç‚¹å›¾
const initHealthNoticeChart = () => {
    if (!healthNoticeChart.value || !DataAnalysis.value.HealthNoticeScatterChart) return;

    const chart = echarts.init(healthNoticeChart.value);
    const data = DataAnalysis.value.HealthNoticeScatterChart.map(item => [item.X, item.Y, item.Size, item.Label]);

    const option = {
        tooltip: {
            trigger: 'item',
            formatter: function (params) {
                return `${params.value[3]}<br/>æé†’æ¬¡æ•°: ${params.value[0]}<br/>å®Œæˆç‡: ${params.value[1]}%`;
            }
        },
        grid: {
            left: '3%',
            right: '7%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: {
            type: 'value',
            name: 'æé†’æ¬¡æ•°',
            splitLine: {
                lineStyle: {
                    type: 'dashed'
                }
            }
        },
        yAxis: {
            type: 'value',
            name: 'å®Œæˆç‡(%)',
            splitLine: {
                lineStyle: {
                    type: 'dashed'
                }
            }
        },
        series: [{
            name: 'å¥åº·æé†’',
            type: 'scatter',
            symbolSize: function (data) {
                return Math.sqrt(data[2]) * 2;
            },
            itemStyle: {
                color: '#5470c6',
                opacity: 0.8
            },
            data: data
        }]
    };

    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize());
}

onBeforeMount(async () => {
    await DataAnalysisApi();
})

onMounted(() => {
    // ç¡®ä¿DOMå·²æ¸²æŸ“å®Œæˆå†åˆå§‹åŒ–å›¾è¡¨
    setTimeout(() => {
        if (DataAnalysis.value && Object.keys(DataAnalysis.value).length > 0) {
            initAllCharts();
        }
    }, 100);
})

</script>
<style scoped lang="scss">
// ä¸»å®¹å™¨æ ·å¼
.dashboard-container {
    padding: 20px;
    // background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 50%, #f0fdf4 100%);
    min-height: 100vh;
    width: 100%;
    position: relative;

    // å¥åº·ä¸»é¢˜è£…é¥°å…ƒç´ 
    &::before {
        content: '';
        position: absolute;
        top: 10%;
        right: 5%;
        width: 100px;
        height: 100px;
        background: radial-gradient(circle, rgba(16, 185, 129, 0.1) 0%, transparent 70%);
        border-radius: 50%;
        z-index: 0;
    }

    &::after {
        content: '';
        position: absolute;
        bottom: 20%;
        left: 8%;
        width: 80px;
        height: 80px;
        background: radial-gradient(circle, rgba(34, 197, 94, 0.08) 0%, transparent 70%);
        border-radius: 50%;
        z-index: 0;
    }

    // ç¡®ä¿å†…å®¹åœ¨è£…é¥°å…ƒç´ ä¹‹ä¸Š
    >* {
        position: relative;
        z-index: 1;
    }
}

// é¡µé¢å¤´éƒ¨æ ·å¼
.page-header {
    text-align: center;
    margin-bottom: 30px;

    .page-title {
        font-size: 32px;
        font-weight: bold;
        color: #065f46;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .page-subtitle {
        font-size: 16px;
        color: #047857;
        margin: 0;
    }
}

// åŒºåŸŸæ ‡é¢˜æ ·å¼
.section-title {
    font-size: 24px;
    font-weight: bold;
    color: #065f46;
    margin-bottom: 20px;
    padding-left: 15px;
    border-left: 4px solid #10b981;
    position: relative;

    &::after {
        content: '';
        position: absolute;
        left: -4px;
        top: 50%;
        transform: translateY(-50%);
        width: 8px;
        height: 8px;
        background: #34d399;
        border-radius: 50%;
        box-shadow: 0 0 10px rgba(52, 211, 153, 0.5);
    }
}

// æ¦‚è§ˆå¡ç‰‡åŒºåŸŸ
.overview-section {
    margin-bottom: 40px;

    .overview-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        width: 100%;
    }

    .overview-card {
        background: white;
        padding: 24px;
        border-radius: 20px;
        box-shadow: 0 4px 20px rgba(16, 185, 129, 0.1);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        border: 2px solid rgba(16, 185, 129, 0.1);
        position: relative;
        overflow: hidden;

        &:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(16, 185, 129, 0.15);
            border-color: rgba(16, 185, 129, 0.2);
        }

        // å¥åº·ä¸»é¢˜è£…é¥°åœ†ç‚¹
        &::before {
            content: '';
            position: absolute;
            top: -10px;
            right: -10px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            opacity: 0.1;
        }

        // å°è£…é¥°åœ†ç‚¹
        &::after {
            content: '';
            position: absolute;
            bottom: 10px;
            right: 15px;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            opacity: 0.3;
        }

        // æ€»ç”¨æˆ·æ•° - è“è‰²å¥åº·ä¸»é¢˜
        &:nth-child(1) {
            border-color: rgba(59, 130, 246, 0.15);
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.1);

            &::before {
                background: #3b82f6;
            }

            &::after {
                background: #60a5fa;
            }

            &:hover {
                box-shadow: 0 12px 30px rgba(59, 130, 246, 0.15);
                border-color: rgba(59, 130, 246, 0.25);
            }
        }

        // å¥åº·æ–‡ç«  - ç»¿è‰²çŸ¥è¯†ä¸»é¢˜
        &:nth-child(2) {
            border-color: rgba(34, 197, 94, 0.15);
            box-shadow: 0 4px 20px rgba(34, 197, 94, 0.1);

            &::before {
                background: #22c55e;
            }

            &::after {
                background: #4ade80;
            }

            &:hover {
                box-shadow: 0 12px 30px rgba(34, 197, 94, 0.15);
                border-color: rgba(34, 197, 94, 0.25);
            }
        }

        // å¥åº·é£Ÿè°± - æ©™è‰²è¥å…»ä¸»é¢˜
        &:nth-child(3) {
            border-color: rgba(251, 146, 60, 0.15);
            box-shadow: 0 4px 20px rgba(251, 146, 60, 0.1);

            &::before {
                background: #fb923c;
            }

            &::after {
                background: #fdba74;
            }

            &:hover {
                box-shadow: 0 12px 30px rgba(251, 146, 60, 0.15);
                border-color: rgba(251, 146, 60, 0.25);
            }
        }

        // è¿åŠ¨é¡¹ç›® - çº¢è‰²æ´»åŠ›ä¸»é¢˜
        &:nth-child(4) {
            border-color: rgba(239, 68, 68, 0.15);
            box-shadow: 0 4px 20px rgba(239, 68, 68, 0.1);

            &::before {
                background: #ef4444;
            }

            &::after {
                background: #f87171;
            }

            &:hover {
                box-shadow: 0 12px 30px rgba(239, 68, 68, 0.15);
                border-color: rgba(239, 68, 68, 0.25);
            }
        }

        // å¥åº·æŒ‡æ ‡ - ç´«è‰²åŒ»ç–—ä¸»é¢˜
        &:nth-child(5) {
            border-color: rgba(168, 85, 247, 0.15);
            box-shadow: 0 4px 20px rgba(168, 85, 247, 0.1);

            &::before {
                background: #a855f7;
            }

            &::after {
                background: #c084fc;
            }

            &:hover {
                box-shadow: 0 12px 30px rgba(168, 85, 247, 0.15);
                border-color: rgba(168, 85, 247, 0.25);
            }
        }

        // å¥åº·è®°å½• - é’è‰²è®°å½•ä¸»é¢˜
        &:nth-child(6) {
            border-color: rgba(6, 182, 212, 0.15);
            box-shadow: 0 4px 20px rgba(6, 182, 212, 0.1);

            &::before {
                background: #06b6d4;
            }

            &::after {
                background: #22d3ee;
            }

            &:hover {
                box-shadow: 0 12px 30px rgba(6, 182, 212, 0.15);
                border-color: rgba(6, 182, 212, 0.25);
            }
        }

        // é¥®é£Ÿè®°å½• - ç²‰è‰²æ¸©é¦¨ä¸»é¢˜
        &:nth-child(7) {
            border-color: rgba(236, 72, 153, 0.15);
            box-shadow: 0 4px 20px rgba(236, 72, 153, 0.1);

            &::before {
                background: #ec4899;
            }

            &::after {
                background: #f472b6;
            }

            &:hover {
                box-shadow: 0 12px 30px rgba(236, 72, 153, 0.15);
                border-color: rgba(236, 72, 153, 0.25);
            }
        }

        // è¿åŠ¨è®°å½• - é›è“è¿åŠ¨ä¸»é¢˜
        &:nth-child(8) {
            border-color: rgba(99, 102, 241, 0.15);
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.1);

            &::before {
                background: #6366f1;
            }

            &::after {
                background: #818cf8;
            }

            &:hover {
                box-shadow: 0 12px 30px rgba(99, 102, 241, 0.15);
                border-color: rgba(99, 102, 241, 0.25);
            }
        }

        .card-icon {
            font-size: 48px;
            margin-right: 20px;
            width: 72px;
            height: 72px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 16px;
            position: relative;

            // å›¾æ ‡å‘å…‰æ•ˆæœ
            &::before {
                content: '';
                position: absolute;
                inset: 0;
                border-radius: 16px;
                padding: 2px;
                background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
                mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
                mask-composite: xor;
            }
        }

        // å›¾æ ‡èƒŒæ™¯è‰²
        &:nth-child(1) .card-icon {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 197, 253, 0.1));
            color: #3b82f6;
        }

        &:nth-child(2) .card-icon {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(134, 239, 172, 0.1));
            color: #22c55e;
        }

        &:nth-child(3) .card-icon {
            background: linear-gradient(135deg, rgba(251, 146, 60, 0.1), rgba(253, 186, 116, 0.1));
            color: #fb923c;
        }

        &:nth-child(4) .card-icon {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(248, 113, 113, 0.1));
            color: #ef4444;
        }

        &:nth-child(5) .card-icon {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(196, 181, 253, 0.1));
            color: #a855f7;
        }

        &:nth-child(6) .card-icon {
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.1), rgba(34, 211, 238, 0.1));
            color: #06b6d4;
        }

        &:nth-child(7) .card-icon {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.1), rgba(244, 114, 182, 0.1));
            color: #ec4899;
        }

        &:nth-child(8) .card-icon {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(129, 140, 248, 0.1));
            color: #6366f1;
        }

        .card-content {
            flex: 1;

            .card-value {
                font-size: 32px;
                font-weight: bold;
                margin-bottom: 8px;
                color: #065f46;
                text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            }

            .card-label {
                font-size: 14px;
                color: #047857;
                font-weight: 500;
                position: relative;
                margin-bottom: 4px;

                &::before {
                    content: 'â—';
                    margin-right: 6px;
                    font-size: 8px;
                    opacity: 0.6;
                }
            }

            .card-trend {
                font-size: 12px;
                color: #059669;
                font-weight: 400;
                opacity: 0.8;
                font-style: italic;
            }
        }
    }
}

// å›¾è¡¨è¡Œå¸ƒå±€
.charts-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
    width: 100%;
    margin-top: 20px;

}

// å›¾è¡¨å®¹å™¨æ ·å¼
.chart-container {
    background: white;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(16, 185, 129, 0.08);
    overflow: hidden;
    transition: all 0.3s ease;
    border: 1px solid rgba(16, 185, 129, 0.1);
    position: relative;

    &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, #10b981, #34d399, #6ee7b7);
    }

    &:hover {
        box-shadow: 0 8px 30px rgba(16, 185, 129, 0.15);
        transform: translateY(-3px);
        border-color: rgba(16, 185, 129, 0.2);
    }

    &.full-width {
        grid-column: 1 / -1;
    }
}

// å›¾è¡¨å¤´éƒ¨
.chart-header {
    padding: 25px 20px 15px;
    border-bottom: 1px solid rgba(16, 185, 129, 0.1);
    background: linear-gradient(135deg, rgba(240, 253, 244, 0.5), rgba(236, 253, 245, 0.3));

    .chart-title {
        font-size: 18px;
        font-weight: bold;
        color: #065f46;
        margin-bottom: 8px;
        position: relative;

        &::before {
            content: 'ğŸ“Š';
            margin-right: 8px;
            font-size: 16px;
        }

        // ç‰¹å®šå›¾è¡¨ç±»å‹çš„å›¾æ ‡
        &.gender-title::before {
            content: 'ğŸ‘«';
        }
    }

    .chart-desc {
        font-size: 14px;
        color: #047857;
        margin: 0;
        line-height: 1.4;
        opacity: 0.8;
    }
}

// å›¾è¡¨å†…å®¹åŒºåŸŸ
.chart-content {
    padding: 20px;

    .chart-canvas {
        width: 100%;
        height: 300px;

        &.large {
            height: 400px;
        }
    }
}

// å„ä¸ªåˆ†æåŒºåŸŸçš„ç‰¹æ®Šæ ·å¼
.user-analysis-section,
.health-analysis-section,
.diet-sport-section,
.engagement-section,
.food-section,
.advanced-section {
    margin-bottom: 40px;
}

// å“åº”å¼è®¾è®¡
@media (max-width: 768px) {
    .dashboard-container {
        padding: 15px;
    }

    .page-header .page-title {
        font-size: 24px;
    }

    .section-title {
        font-size: 20px;
    }

    .overview-cards {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
    }

    .overview-card {
        padding: 15px;

        .card-icon {
            font-size: 36px;
            margin-right: 15px;
        }

        .card-content .card-value {
            font-size: 24px;
        }
    }

    .charts-row {
        grid-template-columns: 1fr;
        gap: 15px;
    }

    .chart-container {
        margin-bottom: 15px;
    }

    .chart-content .chart-canvas {
        height: 250px;

        &.large {
            height: 300px;
        }
    }
}

// å°å±è®¾å¤‡ä¼˜åŒ–
@media (max-width: 480px) {
    .dashboard-container {
        padding: 10px;
    }

    .overview-cards {
        grid-template-columns: 1fr;
    }

    .overview-card {
        flex-direction: column;
        text-align: center;

        .card-icon {
            margin-right: 0;
            margin-bottom: 10px;
        }
    }

    .chart-header {
        padding: 15px;
    }

    .chart-content {
        padding: 15px;

        .chart-canvas {
            height: 200px;

            &.large {
                height: 250px;
            }
        }
    }
}

// åŠ è½½åŠ¨ç”»
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.overview-section,
.user-analysis-section,
.health-analysis-section,
.diet-sport-section,
.engagement-section,
.food-section,
.advanced-section {
    animation: fadeInUp 0.6s ease-out;
}

// æ»šåŠ¨æ¡æ ·å¼
::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 3px;
}

::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 3px;

    &:hover {
        background: #a8a8a8;
    }
}
</style>