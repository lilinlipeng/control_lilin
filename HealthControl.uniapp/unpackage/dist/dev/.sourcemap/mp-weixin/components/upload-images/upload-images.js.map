{"version":3,"file":"upload-images.js","sources":["components/upload-images/upload-images.vue","../../HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/Rjovd29ya3NwYWNlL0hlYWx0aENvbnRyb2wudW5pYXBwL2NvbXBvbmVudHMvdXBsb2FkLWltYWdlcy91cGxvYWQtaW1hZ2VzLnZ1ZQ"],"sourcesContent":["<template>\n\t<view>\n\t\t<uni-file-picker :limit=\"limit\" v-model=\"fileLists\" :title=\"'最多选择' + limit + '张图片'\" @select=\"select\"\n\t\t\t@progress=\"progress\" @success=\"success\" @fail=\"fail\" @delete='deleteFile'> </uni-file-picker>\n\t</view>\n</template>\n\n<script setup>\nimport {\n\tuseCommonStore\n} from '@/store';\nimport {\n\tFullConvertUrlArray\n} from \"@/utils/comm\";\nimport {\n\tUpload\n} from \"@/utils/http\";\nimport {\n\tcomputed,\n\tref,\n\twatch\n} from 'vue';\n\n// 获取store\nconst commonStore = useCommonStore();\n\nconst Token = computed(() => commonStore.Token)\nconst UserInfo = computed(() => commonStore.UserInfo)\nconst RoleType = computed(() => commonStore.RoleType)\nconst UserId = computed(() => commonStore.UserId)\n\n\n// 定义props\nconst props = defineProps({\n\tmodelValue: {\n\t\ttype: [Number, String],\n\t\tdefault: ''\n\t},\n\tlimit: {\n\t\ttype: Number,\n\t\tdefault: 1\n\t}\n});\n\n// 定义emit\nconst emit = defineEmits(['update:modelValue']);\n\n// 定义响应式数据\nconst fileLists = ref([]);\n\n\n// 监听value变化\nwatch(() => props.modelValue, (newVal) => {\n\n\tif (newVal) {\n\n\t\tfileLists.value = newVal.split(\",\").map(x => {\n\t\t\tlet fileInfo = FullConvertUrlArray(x);\n\t\t\treturn {\n\t\t\t\turl: fileInfo[0].url,\n\t\t\t\textname: fileInfo[0].type,\n\t\t\t\tname: fileInfo[0].name\n\t\t\t};\n\t\t});\n\t}\n}, {\n\timmediate: true\n});\n\n// 获取上传状态\nconst select = async (e) => {\n\tconst {\n\t\ttempFilePaths,\n\t\ttempFiles\n\t} = e;\n\tif (tempFilePaths && tempFilePaths.length > 0) {\n\t\tfor (let tempFilePath of tempFilePaths) {\n\t\t\tlet {\n\t\t\t\tData\n\t\t\t} = await Upload(tempFilePath);\n\t\t\tfor (var item of Data) {\n\t\t\t\tlet fileInfo = FullConvertUrlArray(item.Url);\n\t\t\t\tfileLists.value.push({\n\t\t\t\t\turl: fileInfo[0].url,\n\t\t\t\t\textname: fileInfo[0].type,\n\t\t\t\t\tname: fileInfo[0].name\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcovertUrl();\n\t}\n};\n\n// 获取上传进度\nconst progress = (e) => {\n\n};\n\n// 上传成功\nconst success = (e) => {\n\n\tcovertUrl();\n};\n\n// 上传失败\nconst fail = (e) => {\n\n};\n\n// 删除文件\nconst deleteFile = (e) => {\n\tfileLists.value.splice(e.index, 1);\n\tcovertUrl();\n};\n\n// 转换URL并触发input事件\nconst covertUrl = () => {\n\tlet url = fileLists.value.length > 0 ? fileLists.value.map(x => x.url).join(\",\") : \"\";\n\temit('update:modelValue', url)\n};\n</script>\n\n<style lang=\"scss\" scoped>\n/* 示例容器 */\n.example-body {\n\tpadding: 10px;\n\tpadding-top: 0;\n}\n\n/* 自定义图片盒子 */\n.custom-image-box {\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n/* 文本样式 */\n.text {\n\tfont-size: 14px;\n\tcolor: #333;\n}\n</style>","import Component from 'F:/workspace/HealthControl.uniapp/components/upload-images/upload-images.vue'\nwx.createComponent(Component)"],"names":["useCommonStore","computed","ref","watch","FullConvertUrlArray","Upload"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,UAAM,cAAcA,YAAc,eAAA;AAEpBC,kBAAAA,SAAS,MAAM,YAAY,KAAK;AAC7BA,kBAAAA,SAAS,MAAM,YAAY,QAAQ;AACnCA,kBAAAA,SAAS,MAAM,YAAY,QAAQ;AACrCA,kBAAAA,SAAS,MAAM,YAAY,MAAM;AAIhD,UAAM,QAAQ;AAYd,UAAM,OAAO;AAGb,UAAM,YAAYC,cAAAA,IAAI,CAAA,CAAE;AAIxBC,kBAAK,MAAC,MAAM,MAAM,YAAY,CAAC,WAAW;AAEzC,UAAI,QAAQ;AAEX,kBAAU,QAAQ,OAAO,MAAM,GAAG,EAAE,IAAI,OAAK;AAC5C,cAAI,WAAWC,+BAAoB,CAAC;AACpC,iBAAO;AAAA,YACN,KAAK,SAAS,CAAC,EAAE;AAAA,YACjB,SAAS,SAAS,CAAC,EAAE;AAAA,YACrB,MAAM,SAAS,CAAC,EAAE;AAAA,UACtB;AAAA,QACA,CAAG;AAAA,MACD;AAAA,IACF,GAAG;AAAA,MACF,WAAW;AAAA,IACZ,CAAC;AAGD,UAAM,SAAS,OAAO,MAAM;AAC3B,YAAM;AAAA,QACL;AAAA,QACA;AAAA,MACA,IAAG;AACJ,UAAI,iBAAiB,cAAc,SAAS,GAAG;AAC9C,iBAAS,gBAAgB,eAAe;AACvC,cAAI;AAAA,YACH;AAAA,UACJ,IAAO,MAAMC,WAAAA,OAAO,YAAY;AAC7B,mBAAS,QAAQ,MAAM;AACtB,gBAAI,WAAWD,WAAAA,oBAAoB,KAAK,GAAG;AAC3C,sBAAU,MAAM,KAAK;AAAA,cACpB,KAAK,SAAS,CAAC,EAAE;AAAA,cACjB,SAAS,SAAS,CAAC,EAAE;AAAA,cACrB,MAAM,SAAS,CAAC,EAAE;AAAA,YACvB,CAAK;AAAA,UACD;AAAA,QACD;AACD;MACA;AAAA,IACF;AAGA,UAAM,WAAW,CAAC,MAAM;AAAA,IAExB;AAGA,UAAM,UAAU,CAAC,MAAM;AAEtB;IACD;AAGA,UAAM,OAAO,CAAC,MAAM;AAAA,IAEpB;AAGA,UAAM,aAAa,CAAC,MAAM;AACzB,gBAAU,MAAM,OAAO,EAAE,OAAO,CAAC;AACjC;IACD;AAGA,UAAM,YAAY,MAAM;AACvB,UAAI,MAAM,UAAU,MAAM,SAAS,IAAI,UAAU,MAAM,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG,IAAI;AACnF,WAAK,qBAAqB,GAAG;AAAA,IAC9B;;;;;;;;;;;;;;;;;;;ACtHA,GAAG,gBAAgB,SAAS;"}