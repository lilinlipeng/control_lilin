{"version":3,"file":"FoodList.js","sources":["pages/Front/FoodList.vue","../../HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvRnJvbnQvRm9vZExpc3QudnVl"],"sourcesContent":["<template>\n    <view class=\"food-list-container\">\n        <!-- ÂØºËà™Ê†è -->\n        <uni-nav-bar dark :fixed=\"true\" shadow background-color=\"#4CAF50\" status-bar left-icon=\"left\" left-text=\"ËøîÂõû\"\n            @clickLeft=\"goBack\" title=\"ü•ó ÂÅ•Â∫∑È£üÁâ©Â∫ì\" />\n\n        <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->\n        <view class=\"content-wrapper\">\n            <!-- Â∑¶‰æßÂàÜÁ±ªËèúÂçï -->\n            <view class=\"category-menu\">\n                <scroll-view class=\"category-scroll\" scroll-y>\n                    <view v-for=\"(category, index) in FoodTypeList\" :key=\"category.Id\" class=\"category-item\"\n                        :class=\"{ active: activeCategory === index }\" @click=\"selectCategory(index, category.Id)\">\n                        <text class=\"category-name\">{{ category.Name }}</text>\n                    </view>\n                </scroll-view>\n            </view>\n\n            <!-- Âè≥‰æßÈ£üÁâ©ÂàóË°® -->\n            <view class=\"food-content\">\n                <scroll-view class=\"food-scroll\" scroll-y @scroll=\"onFoodScroll\" :scroll-top=\"scrollTop\"\n                    :scroll-with-animation=\"true\">\n                    <view v-for=\"category in FoodTypeList\" :key=\"category.Id\" :id=\"`category-${category.Id}`\"\n                        class=\"food-category-section\">\n                        <!-- ÂàÜÁ±ªÊ†áÈ¢ò -->\n                        <view class=\"category-title\">\n                            <text class=\"title-text\">{{ category.Name }}</text>\n                        </view>\n\n                        <!-- ËØ•ÂàÜÁ±ª‰∏ãÁöÑÈ£üÁâ©ÂàóË°® -->\n                        <view class=\"food-list\">\n                            <view v-for=\"food in category.Foods\" :key=\"food.Id\" class=\"food-item\" @click=\"selectFood(food)\">\n                                <!-- È£üÁâ©ÂõæÁâá -->\n                                <view class=\"food-image\">\n                                    <image :src=\"food.Cover\" mode=\"aspectFill\" class=\"food-cover\" />\n                                </view>\n\n                                <!-- È£üÁâ©‰ø°ÊÅØ -->\n                                <view class=\"food-info\">\n                                    <view class=\"food-name\">{{ food.Name }}</view>\n                                    <view class=\"food-nutrition\">\n                                        <text class=\"nutrition-item\">ÁÉ≠Èáè: {{ food.Calories }}kcal/1g</text>\n                                        <text class=\"nutrition-item\">ËõãÁôΩË¥®: {{ food.Protein }}g</text>\n                                        <text class=\"nutrition-item\">Á¢≥Ê∞¥: {{ food.Carbohydrates }}g</text>\n                                        <text class=\"nutrition-item\">ËÑÇËÇ™: {{ food.Fat }}g</text>\n                                    </view>\n\n                                    <!-- È£üÁâ©Âçï‰ΩçÈÄâÊã© -->\n                                    <view class=\"food-units\" v-if=\"food.FoodUnits && food.FoodUnits.length > 0\">\n                                        <text class=\"units-label\">Â∏∏ËßÅÂçï‰ΩçÔºö</text>\n                                        <view class=\"units-list\">\n                                            <view v-for=\"unit in food.FoodUnits\" :key=\"unit.Id\" class=\"unit-item\"\n                                                @click.stop=\"selectUnit(food, unit)\">\n                                                <text class=\"unit-name\">{{ unit.UnitName }}</text>\n                                                <text class=\"unit-calories\">({{ unit.Calories }}kcal)</text>\n                                            </view>\n                                        </view>\n                                    </view>\n                                </view>\n                            </view>\n                        </view>\n                    </view>\n                </scroll-view>\n            </view>\n        </view>\n\n        <!-- ÂàÜÈáèËæìÂÖ•ÂºπÁ™ó -->\n        <uni-popup ref=\"portionPopup\" type=\"center\" background-color=\"rgba(0,0,0,0.5)\">\n            <view class=\"portion-input-popup\" v-if=\"selectedUnit\">\n                <view class=\"portion-header\">\n                    <text class=\"portion-title\">üçΩÔ∏è Ê∑ªÂä†È£üÁâ©ËÆ∞ÂΩï</text>\n                    <view class=\"portion-close\" @click=\"closePortionPopup\">\n                        <uni-icons type=\"closeempty\" size=\"24\" color=\"#666\"></uni-icons>\n                    </view>\n                </view>\n\n                <view class=\"portion-content\">\n                    <!-- È£üÁâ©‰ø°ÊÅØÊòæÁ§∫ -->\n                    <view class=\"food-summary\">\n                        <image :src=\"selectedUnit.food.Cover\" mode=\"aspectFill\" class=\"summary-image\" />\n                        <view class=\"summary-info\">\n                            <text class=\"summary-name\">{{ selectedUnit.food.Name }}</text>\n                            <text class=\"summary-unit\">Âçï‰Ωç: {{ selectedUnit.unit.UnitName }} ({{ selectedUnit.unit.UnitValue\n                            }}g)</text>\n                        </view>\n                    </view>\n\n                    <!-- ÂàÜÈáèËæìÂÖ• -->\n                    <view class=\"input-section\">\n                        <text class=\"input-label\">ü•Ñ ËØ∑ËæìÂÖ•ÂàÜÈáè</text>\n                        <view class=\"input-wrapper\">\n                            <uni-easyinput v-model=\"portionAmount\" type=\"number\"\n                                :placeholder=\"`ËØ∑ËæìÂÖ•${selectedUnit.unit.UnitName}Êï∞Èáè`\" :styles=\"inputStyles\"\n                                @input=\"calculateNutrition\" />\n                            <text class=\"input-unit\">{{ selectedUnit.unit.UnitName }}</text>\n                        </view>\n                    </view>\n\n                    <!-- ËÆ°ÁÆóÂêéÁöÑËê•ÂÖª‰ø°ÊÅØ -->\n                    <view class=\"calculated-nutrition\" v-if=\"calculatedNutrition\">\n                        <text class=\"nutrition-title\">üìä Ëê•ÂÖªÊàêÂàÜÈ¢ÑËßà</text>\n                        <view class=\"nutrition-cards\">\n                            <view class=\"nutrition-card\">\n                                <text class=\"card-label\">ÁÉ≠Èáè</text>\n                                <text class=\"card-value\">{{ calculatedNutrition.calories }}kcal</text>\n                            </view>\n                            <view class=\"nutrition-card\">\n                                <text class=\"card-label\">ËõãÁôΩË¥®</text>\n                                <text class=\"card-value\">{{ calculatedNutrition.protein }}g</text>\n                            </view>\n                            <view class=\"nutrition-card\">\n                                <text class=\"card-label\">Á¢≥Ê∞¥</text>\n                                <text class=\"card-value\">{{ calculatedNutrition.carbs }}g</text>\n                            </view>\n                            <view class=\"nutrition-card\">\n                                <text class=\"card-label\">ËÑÇËÇ™</text>\n                                <text class=\"card-value\">{{ calculatedNutrition.fat }}g</text>\n                            </view>\n                        </view>\n                    </view>\n\n                    <!-- Êó∂Èó¥ÈÄâÊã© -->\n                    <view class=\"time-section\">\n                        <text class=\"time-label\">‚è∞ ËÆ∞ÂΩïÊó∂Èó¥</text>\n                        <uni-datetime-picker v-model=\"recordTime\" type=\"datetime\" :clear-icon=\"false\" :border=\"false\"\n                            placeholder=\"ÈÄâÊã©ËÆ∞ÂΩïÊó∂Èó¥\">\n                            <view class=\"time-display\">\n                                <text class=\"time-text\">{{ formatTime(recordTime) }}</text>\n                                <uni-icons type=\"calendar\" size=\"20\" color=\"#4CAF50\"></uni-icons>\n                            </view>\n                        </uni-datetime-picker>\n                    </view>\n\n                    <!-- Êìç‰ΩúÊåâÈíÆ -->\n                    <view class=\"action-buttons\">\n                        <view class=\"cancel-btn\" @click=\"closePortionPopup\">\n                            <text class=\"btn-text\">ÂèñÊ∂à</text>\n                        </view>\n                        <view class=\"save-btn\" @click=\"saveDietRecord\" :class=\"{ disabled: !canSave }\">\n                            <text class=\"btn-text\">üíæ ‰øùÂ≠òËÆ∞ÂΩï</text>\n                        </view>\n                    </view>\n                </view>\n            </view>\n        </uni-popup>\n\n        <!-- È£üÁâ©ÈÄâÊã©ÂºπÁ™ó -->\n        <uni-popup ref=\"foodPopup\" type=\"bottom\" background-color=\"#f8fdf8\">\n            <view class=\"food-detail-popup\" v-if=\"selectedFood\">\n                <view class=\"popup-header\">\n                    <text class=\"popup-title\">{{ selectedFood.Name }}</text>\n                    <view class=\"close-btn\" @click=\"closeFoodPopup\">\n                        <uni-icons type=\"closeempty\" size=\"24\" color=\"#999\"></uni-icons>\n                    </view>\n                </view>\n\n                <view class=\"popup-content\">\n                    <image :src=\"selectedFood.Cover\" mode=\"aspectFill\" class=\"popup-image\" />\n\n                    <view class=\"nutrition-detail\">\n                        <text class=\"detail-title\">Ëê•ÂÖªÊàêÂàÜ (ÊØè1g)</text>\n                        <view class=\"nutrition-grid\">\n                            <view class=\"nutrition-cell\">\n                                <text class=\"cell-label\">ÁÉ≠Èáè</text>\n                                <text class=\"cell-value\">{{ selectedFood.Calories }}kcal</text>\n                            </view>\n                            <view class=\"nutrition-cell\">\n                                <text class=\"cell-label\">ËõãÁôΩË¥®</text>\n                                <text class=\"cell-value\">{{ selectedFood.Protein }}g</text>\n                            </view>\n                            <view class=\"nutrition-cell\">\n                                <text class=\"cell-label\">Á¢≥Ê∞¥ÂåñÂêàÁâ©</text>\n                                <text class=\"cell-value\">{{ selectedFood.Carbohydrates }}g</text>\n                            </view>\n                            <view class=\"nutrition-cell\">\n                                <text class=\"cell-label\">ËÑÇËÇ™</text>\n                                <text class=\"cell-value\">{{ selectedFood.Fat }}g</text>\n                            </view>\n                        </view>\n                    </view>\n\n                    <view class=\"unit-selection\" v-if=\"selectedFood.FoodUnits && selectedFood.FoodUnits.length > 0\">\n                        <text class=\"detail-title\">ÈÄâÊã©Âçï‰Ωç</text>\n                        <view class=\"unit-options\">\n                            <view v-for=\"unit in selectedFood.FoodUnits\" :key=\"unit.Id\" class=\"unit-option\"\n                                @click=\"confirmSelectUnit(selectedFood, unit)\">\n                                <view class=\"unit-info\">\n                                    <text class=\"unit-main\">{{ unit.UnitName }}</text>\n                                    <text class=\"unit-weight\">({{ unit.UnitValue }}g)</text>\n                                </view>\n                                <view class=\"unit-nutrition\">\n                                    <text class=\"unit-cal\">{{ unit.Calories }}kcal</text>\n                                </view>\n                            </view>\n                        </view>\n                    </view>\n                </view>\n            </view>\n        </uni-popup>\n    </view>\n</template>\n\n<script setup>\nimport { useCommonStore } from '@/store';\nimport { Post } from '@/utils/http';\nimport { onLoad, onReady, onShow } from \"@dcloudio/uni-app\";\nimport { computed, reactive, ref, nextTick } from 'vue';\nimport { GetFormatFullDate } from '@/utils/comm';\n\n// Ëé∑Âèñstore\nconst commonStore = useCommonStore();\nconst Token = computed(() => commonStore.Token)\nconst UserInfo = computed(() => commonStore.UserInfo)\nconst RoleType = computed(() => commonStore.RoleType)\nconst UserId = computed(() => commonStore.UserId)\n\n// ÂìçÂ∫îÂºèÊï∞ÊçÆ\nconst FoodTypeList = ref([]);\nconst activeCategory = ref(0); // ÂΩìÂâçÊøÄÊ¥ªÁöÑÂàÜÁ±ªÁ¥¢Âºï\nconst scrollTop = ref(0); // Âè≥‰æßÊªöÂä®‰ΩçÁΩÆ\nconst selectedFood = ref(null); // ÈÄâ‰∏≠ÁöÑÈ£üÁâ©\nconst foodPopup = ref(null); // ÂºπÁ™óÂºïÁî®\n\n// ÂàÜÈáèËæìÂÖ•Áõ∏ÂÖ≥Êï∞ÊçÆ\nconst portionPopup = ref(null); // ÂàÜÈáèËæìÂÖ•ÂºπÁ™óÂºïÁî®\nconst selectedUnit = ref(null); // ÈÄâ‰∏≠ÁöÑÂçï‰Ωç‰ø°ÊÅØ { food, unit }\nconst portionAmount = ref(''); // ËæìÂÖ•ÁöÑÂàÜÈáèÊï∞Èáè\nconst recordTime = ref(new Date()); // ËÆ∞ÂΩïÊó∂Èó¥ÔºåÈªòËÆ§ÂΩìÂâçÊó∂Èó¥\nconst calculatedNutrition = ref(null); // ËÆ°ÁÆóÂêéÁöÑËê•ÂÖª‰ø°ÊÅØ\n\n// ËæìÂÖ•Ê°ÜÊ†∑Âºè\nconst inputStyles = {\n    borderColor: '#4CAF50',\n    borderRadius: '12rpx'\n};\n\nconst where = reactive({});\n\n// ËÆ°ÁÆóÂ±ûÊÄß\nconst canSave = computed(() => {\n    return portionAmount.value && parseFloat(portionAmount.value) > 0 && selectedUnit.value;\n});\n\n// ÁîüÂëΩÂë®ÊúüÈí©Â≠ê\nonLoad(async (option) => {\n});\n\nonShow(async () => {\n    await GetFoodTypeListApi();\n});\n\nonReady(async () => {\n});\n\n// ÊñπÊ≥ï\nconst goBack = () => {\n    uni.navigateBack();\n};\n\n// Ëé∑ÂèñÈ£üÁâ©ÂàÜÁ±ªÂàóË°®\nconst GetFoodTypeListApi = async () => {\n    let {\n        Data: {\n            Items\n        }\n    } = await Post('/FoodType/List', { IsQueryChild: true });\n    FoodTypeList.value = Items;\n};\n\n// ÈÄâÊã©ÂàÜÁ±ª\nconst selectCategory = async (index, categoryId) => {\n    activeCategory.value = index;\n\n    // ÊªöÂä®Âà∞ÂØπÂ∫îÁöÑÂàÜÁ±ªÂå∫Âüü\n    await nextTick();\n\n    // Ëé∑ÂèñÁõÆÊ†áÂÖÉÁ¥†‰ΩçÁΩÆÂπ∂ÊªöÂä®\n    const query = uni.createSelectorQuery();\n    query.select(`#category-${categoryId}`).boundingClientRect();\n    query.selectViewport().scrollOffset();\n    query.exec((res) => {\n        if (res[0]) {\n            scrollTop.value = res[0].top - 100; // ÂáèÂéª‰∏Ä‰∫õÂÅèÁßªÈáè\n        }\n    });\n};\n\n// ÁõëÂê¨Âè≥‰æßÊªöÂä®ÔºåÂêåÊ≠•Â∑¶‰æßËèúÂçï\nconst onFoodScroll = (e) => {\n    const scrollTop = e.detail.scrollTop;\n\n    // Ëé∑ÂèñÊâÄÊúâÂàÜÁ±ªÂå∫ÂüüÁöÑ‰ΩçÁΩÆÔºåÊâæÂà∞ÂΩìÂâçÂ∫îËØ•È´ò‰∫ÆÁöÑÂàÜÁ±ª\n    FoodTypeList.value.forEach((category, index) => {\n        const query = uni.createSelectorQuery();\n        query.select(`#category-${category.Id}`).boundingClientRect();\n        query.exec((res) => {\n            if (res[0]) {\n                const categoryTop = res[0].top;\n                const categoryBottom = res[0].top + res[0].height;\n\n                // Â¶ÇÊûúÂΩìÂâçÊªöÂä®‰ΩçÁΩÆÂú®Ëøô‰∏™ÂàÜÁ±ªÂå∫ÂüüÂÜÖÔºåÂ∞±È´ò‰∫ÆËøô‰∏™ÂàÜÁ±ª\n                if (scrollTop >= categoryTop - 200 && scrollTop < categoryBottom - 200) {\n                    activeCategory.value = index;\n                }\n            }\n        });\n    });\n};\n\n// ÈÄâÊã©È£üÁâ©\nconst selectFood = (food) => {\n    selectedFood.value = food;\n    foodPopup.value.open();\n};\n\n// ÂÖ≥Èó≠È£üÁâ©ËØ¶ÊÉÖÂºπÁ™ó\nconst closeFoodPopup = () => {\n    foodPopup.value.close();\n    selectedFood.value = null;\n};\n\n// ÈÄâÊã©È£üÁâ©Âçï‰ΩçÔºàÂú®ÂàóË°®‰∏≠Áõ¥Êé•ÈÄâÊã©Ôºâ\nconst selectUnit = (food, unit) => {\n    selectedUnit.value = { food, unit };\n    portionAmount.value = '1'; // ÈªòËÆ§Êï∞Èáè‰∏∫1\n    recordTime.value = new Date(); // ÈáçÁΩÆ‰∏∫ÂΩìÂâçÊó∂Èó¥\n    calculatedNutrition.value = null;\n\n    // ËÆ°ÁÆóÈªòËÆ§Ëê•ÂÖª‰ø°ÊÅØ\n    calculateNutrition();\n\n    // ÊâìÂºÄÂàÜÈáèËæìÂÖ•ÂºπÁ™ó\n    portionPopup.value.open();\n};\n\n// Á°ÆËÆ§ÈÄâÊã©Âçï‰ΩçÔºàÂú®ÂºπÁ™ó‰∏≠ÈÄâÊã©Ôºâ\nconst confirmSelectUnit = (food, unit) => {\n    // ÂÖ≥Èó≠È£üÁâ©ËØ¶ÊÉÖÂºπÁ™ó\n    closeFoodPopup();\n\n    // ÊâìÂºÄÂàÜÈáèËæìÂÖ•ÂºπÁ™ó\n    selectUnit(food, unit);\n};\n\n// ÂÖ≥Èó≠ÂàÜÈáèËæìÂÖ•ÂºπÁ™ó\nconst closePortionPopup = () => {\n    portionPopup.value.close();\n    selectedUnit.value = null;\n    portionAmount.value = '';\n    calculatedNutrition.value = null;\n};\n\n// ËÆ°ÁÆóËê•ÂÖª‰ø°ÊÅØ\nconst calculateNutrition = () => {\n    if (!selectedUnit.value || !portionAmount.value) {\n        calculatedNutrition.value = null;\n        return;\n    }\n\n    const amount = parseFloat(portionAmount.value);\n    if (isNaN(amount) || amount <= 0) {\n        calculatedNutrition.value = null;\n        return;\n    }\n\n    const { unit } = selectedUnit.value;\n\n    // Ê†πÊçÆËæìÂÖ•ÁöÑÂàÜÈáèËÆ°ÁÆóËê•ÂÖªÊàêÂàÜ\n    // unit‰∏≠ÁöÑËê•ÂÖªÊàêÂàÜÂ∑≤ÁªèÊòØÊåâÁÖßUnitValueËÆ°ÁÆóÂ•ΩÁöÑÊÄªÈáèÔºåÁõ¥Êé•‰πò‰ª•Áî®Êà∑ËæìÂÖ•ÁöÑÂàÜÈáèÂç≥ÂèØ\n    calculatedNutrition.value = {\n        calories: Math.round(unit.Calories * amount * 100) / 100,\n        protein: Math.round(unit.Protein * amount * 100) / 100,\n        carbs: Math.round(unit.Carbohydrates * amount * 100) / 100,\n        fat: Math.round(unit.Fat * amount * 100) / 100\n    };\n};\n\n// Ê†ºÂºèÂåñÊó∂Èó¥ÊòæÁ§∫\nconst formatTime = (time) => {\n    if (!time) return 'ÈÄâÊã©Êó∂Èó¥';\n\n    const date = new Date(time);\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    const hours = String(date.getHours()).padStart(2, '0');\n    const minutes = String(date.getMinutes()).padStart(2, '0');\n\n    return `${year}-${month}-${day} ${hours}:${minutes}`;\n};\n\n// ‰øùÂ≠òÈ•ÆÈ£üËÆ∞ÂΩï\nconst saveDietRecord = async () => {\n    if (!canSave.value) {\n        uni.showToast({\n            title: 'ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÂàÜÈáè',\n            icon: 'none'\n        });\n        return;\n    }\n\n    try {\n        uni.showLoading({\n            title: '‰øùÂ≠ò‰∏≠...'\n        });\n\n        const { food, unit } = selectedUnit.value;\n        const amount = parseInt(portionAmount.value);\n\n        // ÊûÑÂª∫ËØ∑Ê±ÇÊï∞ÊçÆÔºåÂØπÂ∫îÂêéÁ´ØDietRecordÂÆû‰Ωì\n        const dietRecordData = {\n            FoodId: food.Id,\n            RecordUserId: UserId.value, // ‰ΩøÁî®ÂΩìÂâçÁî®Êà∑ID\n            FoodUnitId: unit.Id,\n            RecordTime: GetFormatFullDate(new Date(recordTime.value)),\n            RecordValue: amount\n        };\n\n        // Ë∞ÉÁî®ÂêéÁ´ØAPI‰øùÂ≠òÈ•ÆÈ£üËÆ∞ÂΩï\n        const result = await Post('/DietRecord/CreateOrEdit', dietRecordData);\n\n        uni.hideLoading();\n\n        if (result.Success) {\n            uni.showToast({\n                title: 'ËÆ∞ÂΩï‰øùÂ≠òÊàêÂäüÔºÅ',\n                icon: 'success'\n            });\n\n            // ÂÖ≥Èó≠ÂºπÁ™ó\n            closePortionPopup();\n        } else {\n            uni.showToast({\n                title: result.Msg || '‰øùÂ≠òÂ§±Ë¥•',\n                icon: 'none'\n            });\n        }\n\n    } catch (error) {\n        uni.hideLoading();\n        uni.showToast({\n            title: 'ÁΩëÁªúÈîôËØØÔºåËØ∑ÈáçËØï',\n            icon: 'none'\n        });\n        console.error('‰øùÂ≠òÈ•ÆÈ£üËÆ∞ÂΩïÂ§±Ë¥•:', error);\n    }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.food-list-container {\n    height: 100vh;\n    background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);\n}\n\n/* ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü */\n.content-wrapper {\n    display: flex;\n    height: calc(100vh - 44px);\n\n}\n\n/* Â∑¶‰æßÂàÜÁ±ªËèúÂçï */\n.category-menu {\n    width: 120rpx;\n    background: linear-gradient(180deg, #ffffff 0%, #f8fdf8 100%);\n    border-right: 1rpx solid #e0f0e0;\n    box-shadow: 2rpx 0 8rpx rgba(76, 175, 80, 0.1);\n\n    .category-scroll {\n        height: 100%;\n    }\n\n    .category-item {\n        height: 100rpx;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-bottom: 1rpx solid #f0f0f0;\n        background-color: #fff;\n        transition: all 0.3s;\n\n        &.active {\n            background: linear-gradient(90deg, #e8f5e8 0%, #d4f4d4 100%);\n            border-right: 4rpx solid #4CAF50;\n            box-shadow: inset -2rpx 0 4rpx rgba(76, 175, 80, 0.2);\n\n            .category-name {\n                color: #2E7D32;\n                font-weight: bold;\n            }\n        }\n\n        .category-name {\n            font-size: 24rpx;\n            color: #333;\n            text-align: center;\n            line-height: 1.2;\n        }\n    }\n}\n\n/* Âè≥‰æßÈ£üÁâ©ÂÜÖÂÆπ */\n.food-content {\n    flex: 1;\n\n    .food-scroll {\n        height: 100%;\n        padding: 0 20rpx;\n    }\n}\n\n/* ÂàÜÁ±ªÂå∫Âüü */\n.food-category-section {\n    margin-bottom: 40rpx;\n\n    .category-title {\n        position: sticky;\n        top: 0;\n        background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);\n        padding: 20rpx 0;\n        z-index: 10;\n        border-radius: 12rpx 12rpx 0 0;\n        margin-bottom: 8rpx;\n\n        .title-text {\n            font-size: 32rpx;\n            font-weight: bold;\n            color: #2E7D32;\n            display: flex;\n            align-items: center;\n\n            &::before {\n                content: 'üåø';\n                margin-right: 12rpx;\n                font-size: 28rpx;\n            }\n        }\n    }\n}\n\n/* È£üÁâ©ÂàóË°® */\n.food-list {\n    background: linear-gradient(135deg, #ffffff 0%, #fafffe 100%);\n    border-radius: 16rpx;\n    overflow: hidden;\n    box-shadow: 0 4rpx 12rpx rgba(76, 175, 80, 0.1);\n    border: 1rpx solid rgba(76, 175, 80, 0.1);\n}\n\n/* È£üÁâ©È°π */\n.food-item {\n    display: flex;\n    padding: 24rpx;\n    border-bottom: 1rpx solid #f0f0f0;\n    transition: background-color 0.2s;\n\n    &:last-child {\n        border-bottom: none;\n    }\n\n    &:active {\n        background: linear-gradient(135deg, #f0f8f0 0%, #e8f5e8 100%);\n    }\n\n    .food-image {\n        width: 120rpx;\n        height: 120rpx;\n        margin-right: 24rpx;\n\n        .food-cover {\n            width: 100%;\n            height: 100%;\n            border-radius: 12rpx;\n        }\n    }\n\n    .food-info {\n        flex: 1;\n\n        .food-name {\n            font-size: 32rpx;\n            font-weight: bold;\n            color: #2E7D32;\n            margin-bottom: 12rpx;\n            display: flex;\n            align-items: center;\n\n            &::after {\n                content: 'üçÉ';\n                margin-left: 8rpx;\n                font-size: 20rpx;\n                opacity: 0.7;\n            }\n        }\n\n        .food-nutrition {\n            margin-bottom: 16rpx;\n\n            .nutrition-item {\n                display: inline-block;\n                font-size: 24rpx;\n                color: #558B2F;\n                margin-right: 16rpx;\n                margin-bottom: 8rpx;\n                background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);\n                padding: 4rpx 12rpx;\n                border-radius: 12rpx;\n                border: 1rpx solid rgba(76, 175, 80, 0.2);\n\n                &::before {\n                    content: 'üíö';\n                    margin-right: 6rpx;\n                    font-size: 16rpx;\n                }\n            }\n        }\n\n        .food-units {\n            .units-label {\n                font-size: 24rpx;\n                color: #999;\n                margin-bottom: 8rpx;\n            }\n\n            .units-list {\n                display: flex;\n                flex-wrap: wrap;\n                gap: 12rpx;\n\n                .unit-item {\n                    background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);\n                    border: 1rpx solid #4CAF50;\n                    border-radius: 8rpx;\n                    padding: 8rpx 16rpx;\n                    transition: all 0.2s;\n\n                    &:active {\n                        background: linear-gradient(135deg, #d4f4d4 0%, #e0f0e0 100%);\n                        transform: scale(0.98);\n                        box-shadow: 0 2rpx 4rpx rgba(76, 175, 80, 0.3);\n                    }\n\n                    .unit-name {\n                        font-size: 22rpx;\n                        color: #2E7D32;\n                        margin-right: 8rpx;\n                        font-weight: 600;\n                    }\n\n                    .unit-calories {\n                        font-size: 20rpx;\n                        color: #999;\n                    }\n                }\n            }\n        }\n    }\n}\n\n/* ÂàÜÈáèËæìÂÖ•ÂºπÁ™óÊ†∑Âºè */\n.portion-input-popup {\n    width: 600rpx;\n    background: linear-gradient(135deg, #f8fdf8 0%, #ffffff 100%);\n    border-radius: 24rpx;\n    box-shadow: 0 8rpx 32rpx rgba(76, 175, 80, 0.2);\n\n    .portion-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 32rpx;\n        border-bottom: 1rpx solid #e0f0e0;\n        background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);\n        border-radius: 24rpx 24rpx 0 0;\n\n        .portion-title {\n            font-size: 32rpx;\n            font-weight: bold;\n            color: #2E7D32;\n        }\n\n        .portion-close {\n            padding: 8rpx;\n            background: rgba(255, 255, 255, 0.8);\n            border-radius: 50%;\n            transition: all 0.2s;\n\n            &:active {\n                background: rgba(76, 175, 80, 0.1);\n                transform: scale(0.95);\n            }\n        }\n    }\n\n    .portion-content {\n        padding: 32rpx;\n\n        .food-summary {\n            display: flex;\n            align-items: center;\n            margin-bottom: 32rpx;\n            padding: 20rpx;\n            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);\n            border-radius: 16rpx;\n            border: 1rpx solid rgba(76, 175, 80, 0.2);\n\n            .summary-image {\n                width: 80rpx;\n                height: 80rpx;\n                border-radius: 12rpx;\n                margin-right: 20rpx;\n            }\n\n            .summary-info {\n                flex: 1;\n\n                .summary-name {\n                    display: block;\n                    font-size: 28rpx;\n                    font-weight: bold;\n                    color: #2E7D32;\n                    margin-bottom: 8rpx;\n                }\n\n                .summary-unit {\n                    font-size: 24rpx;\n                    color: #558B2F;\n                }\n            }\n        }\n\n        .input-section {\n            margin-bottom: 32rpx;\n\n            .input-label {\n                display: block;\n                font-size: 28rpx;\n                font-weight: bold;\n                color: #2E7D32;\n                margin-bottom: 16rpx;\n            }\n\n            .input-wrapper {\n                display: flex;\n                align-items: center;\n\n                .input-unit {\n                    margin-left: 16rpx;\n                    font-size: 24rpx;\n                    color: #558B2F;\n                    font-weight: 600;\n                    background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);\n                    padding: 12rpx 20rpx;\n                    border-radius: 12rpx;\n                    border: 1rpx solid rgba(76, 175, 80, 0.3);\n                }\n            }\n        }\n\n        .calculated-nutrition {\n            margin-bottom: 32rpx;\n\n            .nutrition-title {\n                display: block;\n                font-size: 28rpx;\n                font-weight: bold;\n                color: #2E7D32;\n                margin-bottom: 16rpx;\n            }\n\n            .nutrition-cards {\n                display: grid;\n                grid-template-columns: 1fr 1fr;\n                gap: 12rpx;\n\n                .nutrition-card {\n                    background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);\n                    padding: 16rpx;\n                    border-radius: 12rpx;\n                    text-align: center;\n                    border: 1rpx solid rgba(76, 175, 80, 0.2);\n\n                    .card-label {\n                        display: block;\n                        font-size: 22rpx;\n                        color: #558B2F;\n                        margin-bottom: 8rpx;\n                    }\n\n                    .card-value {\n                        font-size: 24rpx;\n                        font-weight: bold;\n                        color: #2E7D32;\n                    }\n                }\n            }\n        }\n\n        .time-section {\n            margin-bottom: 32rpx;\n\n            .time-label {\n                display: block;\n                font-size: 28rpx;\n                font-weight: bold;\n                color: #2E7D32;\n                margin-bottom: 16rpx;\n            }\n\n            .time-display {\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                padding: 20rpx;\n                background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);\n                border-radius: 12rpx;\n                border: 1rpx solid rgba(76, 175, 80, 0.3);\n\n                .time-text {\n                    font-size: 26rpx;\n                    color: #2E7D32;\n                }\n            }\n        }\n\n        .action-buttons {\n            display: flex;\n            gap: 16rpx;\n\n            .cancel-btn,\n            .save-btn {\n                flex: 1;\n                height: 80rpx;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border-radius: 16rpx;\n                transition: all 0.2s;\n\n                .btn-text {\n                    font-size: 28rpx;\n                    font-weight: 600;\n                }\n            }\n\n            .cancel-btn {\n                background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);\n                border: 1rpx solid #ccc;\n\n                .btn-text {\n                    color: #666;\n                }\n\n                &:active {\n                    transform: scale(0.98);\n                    background: linear-gradient(135deg, #e0e0e0 0%, #d0d0d0 100%);\n                }\n            }\n\n            .save-btn {\n                background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);\n                border: 1rpx solid #4CAF50;\n\n                .btn-text {\n                    color: #fff;\n                }\n\n                &:active {\n                    transform: scale(0.98);\n                    background: linear-gradient(135deg, #388E3C 0%, #4CAF50 100%);\n                }\n\n                &.disabled {\n                    background: linear-gradient(135deg, #ccc 0%, #999 100%);\n                    border-color: #ccc;\n                    opacity: 0.6;\n\n                    .btn-text {\n                        color: #666;\n                    }\n                }\n            }\n        }\n    }\n}\n\n/* È£üÁâ©ËØ¶ÊÉÖÂºπÁ™óÊ†∑Âºè */\n.food-detail-popup {\n    max-height: 70vh;\n    background: linear-gradient(135deg, #f8fdf8 0%, #ffffff 100%);\n    border-radius: 24rpx 24rpx 0 0;\n\n    .popup-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 32rpx;\n        border-bottom: 1rpx solid #e0f0e0;\n        background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);\n        border-radius: 24rpx 24rpx 0 0;\n\n        .popup-title {\n            font-size: 36rpx;\n            font-weight: bold;\n            color: #2E7D32;\n            display: flex;\n            align-items: center;\n\n            &::before {\n                content: 'üå±';\n                margin-right: 12rpx;\n                font-size: 32rpx;\n            }\n        }\n\n        .close-btn {\n            padding: 8rpx;\n            background: rgba(255, 255, 255, 0.8);\n            border-radius: 50%;\n            transition: all 0.2s;\n\n            &:active {\n                background: rgba(76, 175, 80, 0.1);\n                transform: scale(0.95);\n            }\n        }\n    }\n\n    .popup-content {\n        padding: 32rpx;\n\n        .popup-image {\n            width: 100%;\n            height: 300rpx;\n            border-radius: 16rpx;\n            margin-bottom: 32rpx;\n        }\n\n        .nutrition-detail {\n            margin-bottom: 32rpx;\n\n            .detail-title {\n                font-size: 28rpx;\n                font-weight: bold;\n                color: #2E7D32;\n                margin-bottom: 16rpx;\n                display: flex;\n                align-items: center;\n\n                &::before {\n                    content: 'üìä';\n                    margin-right: 12rpx;\n                    font-size: 24rpx;\n                }\n            }\n\n            .nutrition-grid {\n                display: grid;\n                grid-template-columns: 1fr 1fr;\n                gap: 16rpx;\n\n                .nutrition-cell {\n                    background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);\n                    padding: 20rpx;\n                    border-radius: 12rpx;\n                    text-align: center;\n                    border: 1rpx solid rgba(76, 175, 80, 0.2);\n                    box-shadow: 0 2rpx 8rpx rgba(76, 175, 80, 0.1);\n\n                    .cell-label {\n                        display: block;\n                        font-size: 24rpx;\n                        color: #558B2F;\n                        margin-bottom: 8rpx;\n                        font-weight: 500;\n                    }\n\n                    .cell-value {\n                        font-size: 28rpx;\n                        font-weight: bold;\n                        color: #2E7D32;\n                    }\n                }\n            }\n        }\n\n        .unit-selection {\n            .detail-title {\n                font-size: 28rpx;\n                font-weight: bold;\n                color: #333;\n                margin-bottom: 16rpx;\n            }\n\n            .unit-options {\n                .unit-option {\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-between;\n                    padding: 24rpx;\n                    background-color: #f8f9fa;\n                    border-radius: 12rpx;\n                    margin-bottom: 16rpx;\n\n                    &:last-child {\n                        margin-bottom: 0;\n                    }\n\n                    .unit-info {\n                        .unit-main {\n                            font-size: 28rpx;\n                            font-weight: bold;\n                            color: #333;\n                            margin-right: 12rpx;\n                        }\n\n                        .unit-weight {\n                            font-size: 24rpx;\n                            color: #666;\n                        }\n                    }\n\n                    .unit-nutrition {\n                        .unit-cal {\n                            font-size: 24rpx;\n                            color: #007aff;\n                            font-weight: bold;\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n</style>","import MiniProgramPage from 'F:/workspace/HealthControl.uniapp/pages/Front/FoodList.vue'\nwx.createPage(MiniProgramPage)"],"names":["useCommonStore","computed","ref","reactive","onLoad","onShow","onReady","uni","Post","nextTick","scrollTop","GetFormatFullDate"],"mappings":"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"}