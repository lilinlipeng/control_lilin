{"version":3,"file":"HealthNoticeList.js","sources":["pages/Front/HealthNoticeList.vue","../../HBuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvRnJvbnQvSGVhbHRoTm90aWNlTGlzdC52dWU"],"sourcesContent":["<template>\n    <view class=\"container\">\n        <!-- 导航栏 -->\n        <uni-nav-bar dark :fixed=\"true\" shadow background-color=\"var(--primary-color)\" status-bar left-icon=\"left\"\n            left-text=\"返回\" @clickLeft=\"goBack\" title=\"健康提醒\" />\n\n        <!-- 内容区域 -->\n        <view class=\"content\">\n            <!-- 健康提醒列表 -->\n            <view class=\"notice-list\" v-if=\"HealthNoticeList.length > 0\">\n                <view v-for=\"item in HealthNoticeList\" :key=\"item.Id\" class=\"notice-card\" @click=\"goToEdit(item.Id)\">\n                    <!-- 卡片头部 -->\n                    <view class=\"card-header\">\n                        <view class=\"title-row\">\n                            <view class=\"title-with-icon\">\n                                <uni-icons type=\"heart-filled\" size=\"16\" color=\"var(--primary-color)\"></uni-icons>\n                                <text class=\"notice-title\">{{ item.Title }}</text>\n                            </view>\n                            <view class=\"status-badge\" :class=\"{\n                                'status-active': item.IsRemind == true,\n                                'status-expired': item.IsRemind == false,\n                                'status-pending': item.IsRemind == null\n                            }\">\n                                {{ item.IsRemind ? '已提醒' : '未提醒' }}\n                            </view>\n                        </view>\n                        <text class=\"notice-content\">{{ item.Content }}</text>\n                    </view>\n\n                    <!-- 卡片信息 -->\n                    <view class=\"card-info\">\n                        <view class=\"info-row\">\n                            <uni-icons type=\"calendar\" size=\"14\" color=\"var(--primary-color)\"></uni-icons>\n                            <text class=\"info-text\">{{ formatDateTime(item.RemindTime) }}</text>\n                        </view>\n                        <view class=\"info-row\">\n                            <uni-icons type=\"notification\" size=\"14\" color=\"var(--primary-color)\"></uni-icons>\n                            <text class=\"info-text\">{{ item.RemindType }}</text>\n                        </view>\n                    </view>\n\n                    <!-- 操作按钮 -->\n                    <view class=\"card-actions\" @click.stop=\"\">\n                        <button class=\"action-btn edit-btn\" size=\"mini\" v-if=\"item.IsRemind == false\"\n                            @click=\"goToEdit(item.Id)\">\n                            <uni-icons type=\"compose\" size=\"14\" color=\"white\"></uni-icons>\n                        </button>\n                        <button class=\"action-btn delete-btn\" size=\"mini\" @click=\"ShowDeleteModal(item.Id)\">\n                            <uni-icons type=\"trash\" size=\"14\" color=\"white\"></uni-icons>\n                        </button>\n                    </view>\n                </view>\n            </view>\n\n            <!-- 空数据提示 -->\n            <view class=\"empty-state\" v-else>\n                <view class=\"empty-icon\">\n                    <uni-icons type=\"heart\" size=\"80\" color=\"var(--primary-color)\"></uni-icons>\n                </view>\n                <text class=\"empty-title\">暂无健康提醒</text>\n                <text class=\"empty-desc\">开始管理您的健康生活吧</text>\n            </view>\n        </view>\n\n        <!-- 悬浮添加按钮 -->\n        <view class=\"fab-button\" @click=\"goToAdd\">\n            <uni-icons type=\"plus\" size=\"24\" color=\"white\"></uni-icons>\n        </view>\n    </view>\n</template>\n\n<script setup>\n\nimport { useCommonStore } from '@/store';\nimport { Post } from '@/utils/http';\nimport { onLoad, onReady, onShow } from \"@dcloudio/uni-app\";\nimport { computed, reactive, ref } from 'vue';\n\n// 获取store\nconst commonStore = useCommonStore();\nconst Token = computed(() => commonStore.Token)\nconst UserInfo = computed(() => commonStore.UserInfo)\nconst RoleType = computed(() => commonStore.RoleType)\nconst UserId = computed(() => commonStore.UserId)\n\n// 健康提醒列表数据\nconst HealthNoticeList = ref([]);\n\n// 查询条件\nconst where = reactive({\n    PageIndex: 1,\n    PageSize: 100\n});\n\n// 生命周期钩子\nonLoad(async (option) => {\n});\n\nonShow(async () => {\n    GetHealthNoticeListApi();\n});\n\nonReady(async () => {\n\n});\n\n// 方法\nconst goBack = () => {\n    uni.navigateBack();\n};\n\n// 跳转到添加页面\nconst goToAdd = () => {\n    uni.navigateTo({\n        url: '/pages/Front/HealthNoticeForm'\n    });\n};\n\n// 跳转到编辑页面\nconst goToEdit = (Id) => {\n    uni.navigateTo({\n        url: `/pages/Front/HealthNoticeForm?Id=${Id}`\n    });\n};\n\n// 获取健康提醒列表\nconst GetHealthNoticeListApi = async () => {\n    try {\n        let {\n            Data: {\n                Items\n            }\n        } = await Post('/HealthNotice/List', where);\n        HealthNoticeList.value = Items || [];\n    } catch (error) {\n        console.error('获取健康提醒列表失败:', error);\n        HealthNoticeList.value = [];\n    }\n}\n\n// 删除\nconst ShowDeleteModal = async (Id) => {\n    uni.showModal({\n        title: '确认删除',\n        content: '确认删除该健康提醒吗？',\n        confirmText: '删除',\n        confirmColor: 'var(--primary-color)',\n        success: async (res) => {\n            if (res.confirm) {\n                try {\n                    const { Success } = await Post(`/HealthNotice/Delete`, { Id: Id });\n                    if (Success) {\n                        await GetHealthNoticeListApi();\n                        uni.showToast({\n                            title: '删除成功',\n                            icon: 'success'\n                        });\n                    }\n                } catch (error) {\n                    console.error('删除失败:', error);\n                    uni.showToast({\n                        title: '删除失败',\n                        icon: 'error'\n                    });\n                }\n            }\n        }\n    })\n};\n\n// 格式化日期时间\nconst formatDateTime = (dateTime) => {\n    if (!dateTime) return '';\n    const date = new Date(dateTime);\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    const hours = String(date.getHours()).padStart(2, '0');\n    const minutes = String(date.getMinutes()).padStart(2, '0');\n    return `${month}-${day} ${hours}:${minutes}`;\n};\n\n// 获取状态文本\nconst getStatusText = (remindTime) => {\n    if (!remindTime) return '待设置';\n    const now = new Date();\n    const remind = new Date(remindTime);\n\n    if (remind <= now) {\n        return '已过期';\n    } else {\n        return '待提醒';\n    }\n};\n\n\n</script>\n\n<style scoped lang=\"scss\">\n.container {\n    min-height: 100vh;\n    background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary-lighter) 100%);\n}\n\n.content {\n    padding: 10upx 24upx 40upx;\n    /* 导航栏高度 + 内边距 */\n}\n\n/* 健康提醒列表样式 */\n.notice-list {\n    .notice-card {\n        background: white;\n        border-radius: 24upx;\n        margin-bottom: 24upx;\n        padding: 32upx;\n        box-shadow: 0 8upx 32upx rgba(var(--primary-rgb), 0.12);\n        position: relative;\n        transition: all 0.3s ease;\n        border: 2upx solid var(--primary-light);\n\n        &:active {\n            transform: scale(0.98);\n        }\n\n        .card-header {\n            margin-bottom: 24upx;\n\n            .title-row {\n                display: flex;\n                align-items: flex-start;\n                justify-content: space-between;\n                margin-bottom: 16upx;\n\n                .title-with-icon {\n                    display: flex;\n                    align-items: center;\n                    gap: 12upx;\n                    flex: 1;\n                    margin-right: 16upx;\n                }\n\n                .notice-title {\n                    font-size: 32upx;\n                    font-weight: 600;\n                    color: var(--primary-dark);\n                    line-height: 1.3;\n                }\n\n                .status-badge {\n                    padding: 8upx 16upx;\n                    border-radius: 20upx;\n                    font-size: 22upx;\n                    font-weight: 500;\n\n                    &.status-active {\n                        background: var(--primary-light);\n                        color: white;\n                    }\n\n                    &.status-expired {\n                        background: #FFEBEE;\n                        color: #E57373;\n                    }\n\n                    &.status-pending {\n                        background: var(--primary-lighter);\n                        color: var(--primary-dark);\n                    }\n                }\n            }\n\n            .notice-content {\n                font-size: 28upx;\n                color: var(--primary-dark);\n                line-height: 1.5;\n            }\n        }\n\n        .card-info {\n            display: flex;\n            gap: 32upx;\n            margin-bottom: 24upx;\n\n            .info-row {\n                display: flex;\n                align-items: center;\n                gap: 8upx;\n\n                .info-text {\n                    font-size: 24upx;\n                    color: var(--primary-color);\n                    font-weight: 500;\n                }\n            }\n        }\n\n        .card-actions {\n            display: flex;\n            gap: 16upx;\n            justify-content: flex-end;\n\n            .action-btn {\n                width: 64upx;\n                height: 64upx;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border: none;\n                transition: all 0.3s ease;\n\n                &:active {\n                    transform: scale(0.9);\n                }\n            }\n\n            .edit-btn {\n                background: var(--primary-color);\n                box-shadow: 0 4upx 16upx rgba(var(--primary-rgb), 0.3);\n            }\n\n            .delete-btn {\n                background: #E57373;\n                box-shadow: 0 4upx 16upx rgba(229, 115, 115, 0.3);\n            }\n        }\n    }\n}\n\n/* 空数据状态 */\n.empty-state {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 120upx 40upx;\n    text-align: center;\n\n    .empty-icon {\n        margin-bottom: 32upx;\n        opacity: 0.7;\n    }\n\n    .empty-title {\n        font-size: 36upx;\n        color: var(--primary-dark);\n        font-weight: 600;\n        margin-bottom: 16upx;\n    }\n\n    .empty-desc {\n        font-size: 28upx;\n        color: var(--primary-color);\n    }\n}\n\n/* 悬浮添加按钮 */\n.fab-button {\n    position: fixed;\n    right: 40upx;\n    bottom: 40upx;\n    width: 120upx;\n    height: 120upx;\n    background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: 0 16upx 40upx rgba(var(--primary-rgb), 0.4);\n    z-index: 100;\n    transition: all 0.3s ease;\n\n    &:active {\n        transform: scale(0.9);\n    }\n\n    &::before {\n        content: '';\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        border-radius: 50%;\n        background: rgba(255, 255, 255, 0.2);\n        animation: pulse 2s infinite;\n    }\n}\n\n@keyframes pulse {\n    0% {\n        transform: scale(1);\n        opacity: 1;\n    }\n\n    70% {\n        transform: scale(1.3);\n        opacity: 0;\n    }\n\n    100% {\n        transform: scale(1.3);\n        opacity: 0;\n    }\n}\n</style>\n","import MiniProgramPage from 'F:/workspace/HealthControl.uniapp/pages/Front/HealthNoticeList.vue'\nwx.createPage(MiniProgramPage)"],"names":["useCommonStore","computed","ref","reactive","onLoad","onShow","onReady","uni","Post"],"mappings":";;;;;;;;;;;;;;;;;AA+EA,UAAM,cAAcA,YAAc,eAAA;AACpBC,kBAAAA,SAAS,MAAM,YAAY,KAAK;AAC7BA,kBAAAA,SAAS,MAAM,YAAY,QAAQ;AACnCA,kBAAAA,SAAS,MAAM,YAAY,QAAQ;AACrCA,kBAAAA,SAAS,MAAM,YAAY,MAAM;AAGhD,UAAM,mBAAmBC,cAAAA,IAAI,CAAA,CAAE;AAG/B,UAAM,QAAQC,cAAAA,SAAS;AAAA,MACnB,WAAW;AAAA,MACX,UAAU;AAAA,IACd,CAAC;AAGDC,kBAAM,OAAC,OAAO,WAAW;AAAA,IACzB,CAAC;AAEDC,kBAAAA,OAAO,YAAY;AACf;IACJ,CAAC;AAEDC,kBAAAA,QAAQ,YAAY;AAAA,IAEpB,CAAC;AAGD,UAAM,SAAS,MAAM;AACjBC,oBAAG,MAAC,aAAY;AAAA,IACpB;AAGA,UAAM,UAAU,MAAM;AAClBA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK;AAAA,MACb,CAAK;AAAA,IACL;AAGA,UAAM,WAAW,CAAC,OAAO;AACrBA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAK,oCAAoC,EAAE;AAAA,MACnD,CAAK;AAAA,IACL;AAGA,UAAM,yBAAyB,YAAY;AACvC,UAAI;AACA,YAAI;AAAA,UACA,MAAM;AAAA,YACF;AAAA,UACH;AAAA,QACJ,IAAG,MAAMC,WAAI,KAAC,sBAAsB,KAAK;AAC1C,yBAAiB,QAAQ,SAAS;MACrC,SAAQ,OAAO;AACZD,sBAAA,MAAA,MAAA,SAAA,2CAAc,eAAe,KAAK;AAClC,yBAAiB,QAAQ;MAC5B;AAAA,IACL;AAGA,UAAM,kBAAkB,OAAO,OAAO;AAClCA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,SAAS;AAAA,QACT,aAAa;AAAA,QACb,cAAc;AAAA,QACd,SAAS,OAAO,QAAQ;AACpB,cAAI,IAAI,SAAS;AACb,gBAAI;AACA,oBAAM,EAAE,YAAY,MAAMC,gBAAK,wBAAwB,EAAE,GAAM,CAAE;AACjE,kBAAI,SAAS;AACT,sBAAM,uBAAsB;AAC5BD,8BAAAA,MAAI,UAAU;AAAA,kBACV,OAAO;AAAA,kBACP,MAAM;AAAA,gBAClC,CAAyB;AAAA,cACJ;AAAA,YACJ,SAAQ,OAAO;AACZA,4FAAc,SAAS,KAAK;AAC5BA,4BAAAA,MAAI,UAAU;AAAA,gBACV,OAAO;AAAA,gBACP,MAAM;AAAA,cAC9B,CAAqB;AAAA,YACJ;AAAA,UACJ;AAAA,QACJ;AAAA,MACT,CAAK;AAAA,IACL;AAGA,UAAM,iBAAiB,CAAC,aAAa;AACjC,UAAI,CAAC;AAAU,eAAO;AACtB,YAAM,OAAO,IAAI,KAAK,QAAQ;AACjB,WAAK,YAAc;AAChC,YAAM,QAAQ,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,YAAM,MAAM,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAClD,YAAM,QAAQ,OAAO,KAAK,SAAU,CAAA,EAAE,SAAS,GAAG,GAAG;AACrD,YAAM,UAAU,OAAO,KAAK,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AACzD,aAAO,GAAG,KAAK,IAAI,GAAG,IAAI,KAAK,IAAI,OAAO;AAAA,IAC9C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnLA,GAAG,WAAW,eAAe;"}